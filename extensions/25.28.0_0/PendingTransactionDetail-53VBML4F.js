import{Ea as He,oa as R,q as Z,qa as Ve,s as Ge,u as Ne}from"./chunk-AMFBRYZX.js";import"./chunk-SERUZOGH.js";import"./chunk-KTETFJNC.js";import{a as D}from"./chunk-2ADUYUI4.js";import"./chunk-XQOJIQLP.js";import"./chunk-5JX67CVA.js";import"./chunk-HO7ZJLVP.js";import"./chunk-U2ZBADSX.js";import"./chunk-XBPWOUK6.js";import"./chunk-3A6TGOFP.js";import"./chunk-MWGJZC2B.js";import"./chunk-Y5DSDVWB.js";import"./chunk-Q2CJBZ36.js";import"./chunk-IEC36PYL.js";import"./chunk-RCTFQ5RY.js";import"./chunk-H7XHGTRT.js";import"./chunk-FFSCLU3N.js";import"./chunk-6OGAEY46.js";import{f as O}from"./chunk-ZS5DCR5N.js";import"./chunk-YQDK2KIS.js";import{a as Fe}from"./chunk-B5X6OJ4M.js";import"./chunk-UWMKBOBS.js";import"./chunk-CFJPS3RY.js";import{c as Ae}from"./chunk-6OURT4HP.js";import{O as ge,Yb as Me}from"./chunk-GWUVAKX4.js";import"./chunk-VGFG26AC.js";import"./chunk-64SFTQTZ.js";import"./chunk-6QNUOYSW.js";import"./chunk-3D6TIEIV.js";import{p as Ie}from"./chunk-MDYMDZNO.js";import"./chunk-TUQYLFS7.js";import{E as Ee,Ga as Ue,N as Q,R as ke,S as De,_ as be,fa as le,ia as ve,ka as W}from"./chunk-G3SJLT24.js";import"./chunk-DR6UT56S.js";import"./chunk-I4O7QVCI.js";import"./chunk-BDQDDHRI.js";import"./chunk-PRCCLR5N.js";import"./chunk-JHSMRLRR.js";import{a as Y,c as $,d as L}from"./chunk-EW3NOMMT.js";import{B as pe,S as Be,eb as E,m as f,p as me,q as de}from"./chunk-AXFDOJRV.js";import"./chunk-HBMWL2L6.js";import"./chunk-TEXQAPAF.js";import"./chunk-HPOIQOE7.js";import"./chunk-RL5NICHE.js";import"./chunk-DZSKJQUR.js";import{a as we,c as X}from"./chunk-IEY2ZFRQ.js";import"./chunk-BCKEKIIT.js";import"./chunk-GYYECUZK.js";import{Bb as Se,Ib as z,K as Pe,Ta as re}from"./chunk-FDJQKATD.js";import{Y as H,a as G,c as N,j as V}from"./chunk-OGTXJ4NL.js";import{ec as J,lb as P,ne as it,vf as A}from"./chunk-MP5PPKB7.js";import{u as se}from"./chunk-LV3AOIIH.js";import{F as Ce,T as ce,c as q}from"./chunk-LT72WXA6.js";import{Da as s,Q as M,c as ae}from"./chunk-NRW4C74H.js";import"./chunk-2POO4JJE.js";import"./chunk-PQWATTJB.js";import"./chunk-OLIHMAK6.js";import{f as oe,h as B,n as F}from"./chunk-YJSZZTEX.js";B();F();var a=oe(ae());B();F();var T=oe(ae());var st=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,ct=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,lt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,mt=f(E)`
  margin-top: 16px;
`,dt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Le=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,T.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,d=P.getAddressType(t),I=e.data.transactions[e.data.transactions.length-1],{data:c}=A(),{data:n,status:b}=le(e,()=>u(),c),{data:h}=Q(t,n),S=h?.gasEstimationPriceUSD??"",{data:k}=H(),U=[];if(k){let x=k.explorers[t]??G.get(t).defaultExplorer,p=V({networkID:t,endpoint:"transaction",explorerType:x,param:I.hash});p!==""&&U.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[x]}),value:p,type:"link"})}let{data:v,status:_}=W(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),y=z(o,_,v),w=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):T.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:y!==""?y:T.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...U],{mutateAsync:C}=Ie(),ee=(0,T.useCallback)(async()=>{if(!c||!n)return;let x=c.addresses.find(p=>p.networkID===t);if(x){e.type==="cancel"?X.capture("transactionPrioritizeCancelConfirmClicked",{data:{chainID:t,chainType:d}}):X.capture("transactionCancelConfirmClicked",{data:{chainID:t,chainType:d}});try{r("inflight");let p=Ue({ethereumNetworkID:t,sender:x.address,destination:x.address,value:new q("0",10),nonce:e.data.nonce});await C({multichainTransaction:{networkID:t,unsignedTransaction:p},pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:se.parse({from:e.ownerAddress})},senderAddress:x,gasEstimation:n}),u(),i(),r(void 0)}catch(p){J.captureError(p,"transaction"),r("error")}}},[c,t,d,e,n,C,u,i]);return T.default.createElement(st,null,T.default.createElement(ct,null,T.default.createElement(Ge,{image:{type:"icon",preset:"x-bold"},size:64}),T.default.createElement(lt,{size:28,weight:600},e.type==="cancel"?o("transactionPrioritizeCancel"):o("transactionCancel")),T.default.createElement(R,{rows:w}),g!=="error"&&T.default.createElement(mt,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionCancelHelperText")),g==="error"&&T.default.createElement(dt,null,T.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:T.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),T.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:ee,primaryTheme:"warning",primaryText:g==="inflight"?T.default.createElement(Y,{trackColor:s.colors.legacy.accentAlert,color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||b==="error",secondaryText:o("commandClose")}))};B();F();var Oe=oe(it()),l=oe(ae());var ft=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,ut=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,gt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,Tt=f(E)`
  margin-top: 16px;
`,xt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,yt=({size:e})=>l.default.createElement(de,{size:e},l.default.createElement(me,{shape:"circle",color:ce(s.colors.legacy.accentSuccess,.1)},l.default.createElement(pe,{width:32}))),_e=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,l.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,{data:d}=A(),{data:I,status:c}=Ee({networkID:t}),n=I?.fast,b=re.get(t).transactionSpeedSeconds("fast"),{data:h}=H(),S=[];if(h){let y=h.explorers[t]??G.get(t).defaultExplorer,w=V({networkID:t,endpoint:"transaction",explorerType:y,param:e.data.txID});w!==""&&S.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[y]}),value:w,type:"link"})}let k=z(o,c,b?{timeToMineSeconds:b}:void 0),U=[{label:o("richTransactionDetailNetworkFee"),value:n?`${Pe(n.btcPerKilobyte)} sats/vB`:l.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:k!==""?k:l.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...S],v=be(),_=(0,l.useCallback)(async()=>{if(!d||!n?.btcPerKilobyte)return;let y=d.addresses.filter(C=>C.networkID===t),w=y[0];y.length>1&&(w=y.find(C=>C.addressType==="bip122_p2wpkh")),X.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t}});try{r("inflight"),await Se(Me(),{addressType:w.addressType,accountIdentifier:d.identifier,pendingTransaction:e,pendingTransactionInput:{...(0,Oe.default)(e)},desiredFeeRateInBtcPerKilobyte:n.btcPerKilobyte,safeToSendUtxos:await v.getSafeToSendUtxos(w.address),utxoManager:v},new we),u(),i(),r(void 0)}catch(C){J.captureError(C,"transaction"),r("error")}},[d,t,e,n?.btcPerKilobyte,u,i,v]);return l.default.createElement(ft,null,l.default.createElement(ut,null,l.default.createElement(yt,{size:64}),l.default.createElement(gt,{size:28,weight:600},o("transactionSpeedUp")),l.default.createElement(R,{rows:U}),g!=="error"&&l.default.createElement(Tt,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionSpeedUplHelperText")),g==="error"&&l.default.createElement(xt,null,l.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:l.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),l.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:_,primaryText:g==="inflight"?l.default.createElement(Y,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:c==="error"&&!n?.btcPerKilobyte,secondaryText:o("commandClose")}))};B();F();var m=oe(ae());var ht=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Ct=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Pt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,St=f(E)`
  margin-top: 16px;
`,wt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Et=({size:e})=>m.default.createElement(de,{size:e},m.default.createElement(me,{shape:"circle",color:ce(s.colors.legacy.accentSuccess,.1)},m.default.createElement(pe,{width:32}))),Ke=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,m.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,d=P.getAddressType(t),I=e.data.transactions[e.data.transactions.length-1],{data:c}=A(),{data:n,status:b}=le(e,()=>u(),c),{data:h}=Q(t,n),S=h?.gasEstimationPriceUSD??"",{data:k}=H(),U=[];if(k){let x=k.explorers[t]??G.get(t).defaultExplorer,p=V({networkID:t,endpoint:"transaction",explorerType:x,param:I.hash});p!==""&&U.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[x]}),value:p,type:"link"})}let{data:v,status:_}=W(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),y=z(o,_,v),w=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):m.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:y!==""?y:m.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...U],{mutateAsync:C}=ve(),ee=(0,m.useCallback)(async()=>{if(!(!c||!n||!c.addresses.find(p=>p.networkID===t))){X.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t,chainType:d}});try{r("inflight"),await C({chainType:"eip155",accountIdentifier:c.identifier,pendingTransaction:e,pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:se.parse({from:e.ownerAddress})},gasEstimation:n,nonce:e.data.nonce}),u(),i(),r(void 0)}catch(p){J.captureError(p,"transaction"),r("error")}}},[c,t,d,e,n,C,i,u]);return m.default.createElement(ht,null,m.default.createElement(Ct,null,m.default.createElement(Et,{size:64}),m.default.createElement(Pt,{size:28,weight:600},o("transactionSpeedUp")),m.default.createElement(R,{rows:w}),g!=="error"&&m.default.createElement(St,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionSpeedUplHelperText")),g==="error"&&m.default.createElement(wt,null,m.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:m.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),m.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:ee,primaryText:g==="inflight"?m.default.createElement(Y,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||b==="error",secondaryText:o("commandClose")}))};var kt=e=>{let{networkID:i}=e,[o,g]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{let K=setInterval(()=>g(Date.now()),5e3);return()=>clearInterval(K)},[g]);let{t:r}=M(),{pushDetailView:u}=O(),{handleHideModalVisibility:t}=He(),d=(0,a.useCallback)(()=>t("pendingTransaction"),[t]),{data:I}=A(),{data:c}=De(I?.addresses||[]),n=c?.pendingTransaction.filter(K=>e.networkID===K.networkID),b=n?n[n.length-1]?.id:void 0,h=re.get(e.networkID).isPendingTransactionConfirmed(e),S=!1,k=e.type??"dappInteraction",U=Ce(e.timestamp??0,r("richTransactionDetailAt")),{header:v,assetSymbol:_,tokenUSDPrice:y,uiRecipient:w,logoUri:C}=(0,a.useMemo)(()=>({header:e.display.detail?.header??"",assetSymbol:e.display.detail?.assetSymbol??"",tokenUSDPrice:e.display.detail?.tokenUSDPrice??"",uiRecipient:e.display.detail?.uiRecipient??"",logoUri:e.display.detail?.logoUri??""}),[e]),ee=P.getNetworkName(i),x="",p=s.colors.legacy.textSecondary;h?S?(x=r("transactionsFailed"),p=s.colors.legacy.accentAlert):(x=r("transactionsSuccess"),p=s.colors.legacy.accentSuccess):e.type==="cancel"?(x=r("pendingTransactionCancelling"),p=s.colors.legacy.accentAlert):x=r("pendingTransactionPending");let te;if("transactions"in e.data&&P.isEVMNetworkID(i)){let j=e.data.transactions[e.data.transactions.length-1].unsignedTransaction,ie=new q(j.maxFeePerGas??"0"),nt=new q(j.maxPriorityFeePerGas??"0");te={networkID:i,gasLimit:new q(j.gas??"0"),maxFeePerGas:ie,maxPriorityFeePerGas:nt},S=!!e.data?.transactions?.[e.data?.transactions?.length-1]?.error}let{data:je}=Q(i,te),Xe=r("gasUpTo",{amount:je?.gasEstimationPriceUSD}),{data:$e,status:qe}=W(i,te?.maxFeePerGas,te?.maxPriorityFeePerGas),xe=z(r,qe,$e),{data:ye}=H(),he=[];if(ye){let K=ye.explorers[i]??G.get(i).defaultExplorer,j="";P.isEVMNetworkID(e.networkID)&&"transactions"in e.data&&(j=e.data.transactions[e.data.transactions.length-1].hash),P.isBitcoinNetworkID(e.networkID)&&(j=e.data.txID);let ie=V({networkID:i,endpoint:"transaction",explorerType:K,param:j});ie!==""&&he.push({label:r("richTransactionDetailViewOnExplorer",{explorer:N[K]}),value:ie,type:"link"})}let Je=P.getNetworkName(i),Qe={label:r("pendingTransactionDate"),value:U},We={label:r("pendingTransactionStatus"),value:x,color:p},Ye={label:r("transactionsTo"),value:w??""},Ze={label:r("historyNetwork"),value:ee},Re={label:r("pendingTransactionNetworkFee"),value:Xe,tooltipContent:r("networkFeesTooltipDescription",{chainName:Je})},et={label:r("pendingTransactionEstimatedTime"),value:xe!==""?xe:a.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary}),tooltipContent:r("sendFungibleSummaryEstimatedTimeDescription")},fe=a.default.createElement(Ne,{pendingTransactionType:k,isError:S,isConfirmed:h,logoUri:C,size:"medium"}),ne,tt=!h&&ge.get(i).showFeeRowInPendingTransactionDetail,ot=ge.get(i).showTimeToMineRowInPendingTransactionDetail&&!h,rt=e.display.detail?.secondaryHeader,ue=[Qe,We,Ye,Ze,...tt?[Re]:[],...ot?[et]:[],...he];switch(k){case"send":{ne={sections:[{rows:ue}],title:h?r("richTransactionDetailSent"):r("pendingTransactionsSendingTitle",{assetSymbol:_}),primaryText:{value:v},secondaryText:{value:y},image:fe};break}case"cancel":{ne={sections:[{rows:ue}],title:r(h?"transactionCancelled":"pendingTransactionCancelling"),primaryText:{value:v},secondaryText:{value:y},image:fe};break}case"dappInteraction":default:{ne={sections:[{rows:ue}],title:r(h?"richTransactionDetailAppInteraction":"pendingTransactionPendingInteraction"),primaryText:{value:""},secondaryText:{value:rt??r("pendingTransactionUnknownApp")},image:fe};break}}return{detailsProps:ne,pendingTransaction:e,isOldestPendingTx:b===e.id,leftButton:a.default.createElement(Dt,{onClick:d},a.default.createElement(Be,null)),showCancelEvmTransactionModal:()=>{u(a.default.createElement(Le,{onSuccess:d,pendingTransaction:e}))},showSpeedUpEvmTransactionModal:()=>{u(a.default.createElement(Ke,{onSuccess:d,pendingTransaction:e}))},showSpeedUpBitcoinTransactionModal:()=>{u(a.default.createElement(_e,{onSuccess:d,pendingTransaction:e}))},hidePendingTransactionModal:d,now:o}},Dt=f(Ae)`
  position: absolute;
  left: 5px;
`,bt=({pendingTransaction:e})=>{let i=kt(e);return a.default.createElement(It,{...i})},vt=({pendingTransactionId:e})=>{let{data:i}=ke(e),[o,g]=(0,a.useState)();return(0,a.useEffect)(()=>{i&&g(i)},[i]),o?a.default.createElement(bt,{pendingTransaction:o}):null},kr=vt,It=a.default.memo(({detailsProps:e,showCancelEvmTransactionModal:i,showSpeedUpEvmTransactionModal:o,showSpeedUpBitcoinTransactionModal:g,hidePendingTransactionModal:r,leftButton:u,pendingTransaction:t,isOldestPendingTx:d,now:I})=>{let{t:c}=M(),n=a.default.createElement($,{onClick:r},c("commandClose"));if(t&&(d||t.type!=="cancel")&&!re.get(t.networkID).isPendingTransactionMined(t)){if(P.isPolygonNetworkID(t.networkID)){t=t;let b=t.data.transactions[t.data.transactions.length-1];I-b.timestamp>6e4&&(t.type==="cancel"?n=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):n=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel")))}P.isEthereumNetworkID(t.networkID)&&(t.type==="cancel"?n=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):d?n=a.default.createElement(L,{primaryText:c("pendingTransactionSpeedUp"),secondaryText:c("pendingTransactionCancel"),onPrimaryClicked:o,onSecondaryClicked:i,primaryTheme:"default",secondaryTheme:"warning"}):n=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel"))),P.isBitcoinNetworkID(t.networkID)&&(n=a.default.createElement($,{theme:"default",onClick:g},c("pendingTransactionSpeedUp")))}return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ve,{...e,leftButton:u}),a.default.createElement(Fe,null,n))});export{vt as PendingTransactionDetail,kr as default};
//# sourceMappingURL=PendingTransactionDetail-53VBML4F.js.map
