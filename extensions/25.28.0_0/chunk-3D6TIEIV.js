import{$ as Xn,S as $n,ha as Zn,ia as to}from"./chunk-MDYMDZNO.js";import{$a as ge,Ca as ne,Fa as Qt,H as Vn,I as jn,La as Gn,Ma as H,Na as Qn,Pa as Hn,U as Be,Xa as Yn,Za as Jn,ja as zn}from"./chunk-G3SJLT24.js";import{a as Fn}from"./chunk-HPOIQOE7.js";import{Ob as ii,Sb as ye,Wa as mr,Wb as Rn,Xb as Cn,Zb as ni,_b as Nn,ac as yr,bc as qn,cb as fr,db as Sr,fb as De,ic as Un,lc as Kn,pc as Qe,rc as Wn,x as Tt,y as Ee}from"./chunk-FDJQKATD.js";import{o as pr,pa as gr}from"./chunk-OGTXJ4NL.js";import{Ab as wn,Bc as vt,Ec as _,F as pn,L as mn,M as fn,Md as Mn,N as bt,O as G,P as S,S as gn,Se as On,T as ht,Tc as _n,Ue as xn,Vd as re,Vf as ie,W as te,Yb as Me,Zb as Tn,Zf as Dn,ac as ee,bf as En,ec as $,g as bs,lb as q,mc as In,md as Ln,nb as tt,ob as ri,oc as Q,qc as Oe,sb as vn,tb as Le,u as At,vf as xe,zc as X}from"./chunk-MP5PPKB7.js";import{c as ur,e as As}from"./chunk-LV3AOIIH.js";import{$ as fe,Z as An,aa as bn,b as J,c as R,ea as hn,fa as Pt,ga as Pn,y as U}from"./chunk-LT72WXA6.js";import{B as _e,D as lr,E as Sn,F as dr,G as yn,Ia as Bn,Ja as Se,L as T,P as kn,Q as ct,c as E,g as ei,h as Ge,hb as wt,i as Zt,j as ln,k as dn,l as w,q as Ie}from"./chunk-NRW4C74H.js";import{c as N,f as I,h as o,l as ks,m as Buffer,n as a}from"./chunk-YJSZZTEX.js";var ha=N(Fr=>{"use strict";o();a();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.deserialize=au;Fr.serialize=su;var ba=Rr();function au(e,t=0){return ba.depositReceiptBeet.deserialize(e,t+8)}function su(e){return ba.depositReceiptBeet.serialize(e)}});var Rr=N(V=>{"use strict";o();a();var cu=V&&V.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),uu=V&&V.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nr=V&&V.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&cu(r,t,i[n]);return uu(r,t),r}}();Object.defineProperty(V,"__esModule",{value:!0});V.depositReceiptBeet=V.DepositReceipt=void 0;var lu=Nr(At()),se=Nr(Tt()),nr=Nr(Ee()),du=Nr(ha()),Cr=class e{constructor(t,r,i,n,s,c,u,l,p,f){this.base=t,this.owner=r,this.stakePool=i,this.stakePoolDepositStakeAuthority=n,this.depositTime=s,this.lstAmount=c,this.coolDownSeconds=u,this.initialFeeBps=l,this.bumpSeed=p,this.reserved=f}static fromArgs(t){return new e(t.base,t.owner,t.stakePool,t.stakePoolDepositStakeAuthority,t.depositTime,t.lstAmount,t.coolDownSeconds,t.initialFeeBps,t.bumpSeed,t.reserved)}static fromAccountInfo(t,r=0){return e.deserialize(t.data,r)}static async fromAccountAddress(t,r,i){let n=await t.getAccountInfo(r,i);if(n==null)throw new Error(`Unable to find DepositReceipt account at ${r}`);return e.fromAccountInfo(n,0)[0]}static gpaBuilder(t=new lu.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return nr.GpaBuilder.fromStruct(t,V.depositReceiptBeet)}static deserialize(t,r=0){return mu(t,r)}serialize(){return pu(this)}static get byteSize(){return V.depositReceiptBeet.byteSize}static async getMinimumBalanceForRentExemption(t,r){return t.getMinimumBalanceForRentExemption(e.byteSize,r)}static hasCorrectByteSize(t,r=0){return t.byteLength-r===e.byteSize}pretty(){return{base:this.base.toBase58(),owner:this.owner.toBase58(),stakePool:this.stakePool.toBase58(),stakePoolDepositStakeAuthority:this.stakePoolDepositStakeAuthority.toBase58(),depositTime:this.depositTime,lstAmount:this.lstAmount,coolDownSeconds:this.coolDownSeconds,initialFeeBps:this.initialFeeBps,bumpSeed:this.bumpSeed,reserved:this.reserved}}};V.DepositReceipt=Cr;V.depositReceiptBeet=new se.BeetStruct([["base",nr.publicKey],["owner",nr.publicKey],["stakePool",nr.publicKey],["stakePoolDepositStakeAuthority",nr.publicKey],["depositTime",se.u64],["lstAmount",se.u64],["coolDownSeconds",se.u64],["initialFeeBps",se.u32],["bumpSeed",se.u8],["reserved",se.uniformFixedSizeArray(se.u8,256)]],Cr.fromArgs,"DepositReceipt");var qe=du,pu=typeof qe.serialize=="function"?qe.serialize.bind(qe):V.depositReceiptBeet.serialize.bind(V.depositReceiptBeet),mu=typeof qe.deserialize=="function"?qe.deserialize.bind(qe):V.depositReceiptBeet.deserialize.bind(V.depositReceiptBeet)});var va=N(qr=>{"use strict";o();a();Object.defineProperty(qr,"__esModule",{value:!0});qr.deserialize=fu;qr.serialize=Su;var Pa=Ur();function fu(e,t=0){return Pa.stakePoolDepositStakeAuthorityBeet.deserialize(e,t+8)}function Su(e){return Pa.stakePoolDepositStakeAuthorityBeet.serialize(e)}});var Ur=N(j=>{"use strict";o();a();var yu=j&&j.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),gu=j&&j.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wr=j&&j.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&yu(r,t,i[n]);return gu(r,t),r}}();Object.defineProperty(j,"__esModule",{value:!0});j.stakePoolDepositStakeAuthorityBeet=j.StakePoolDepositStakeAuthority=void 0;var ku=Wr(At()),Ue=Wr(Tt()),ce=Wr(Ee()),Au=Wr(va()),Kr=class e{constructor(t,r,i,n,s,c,u,l,p,f,m){this.base=t,this.stakePool=r,this.poolMint=i,this.authority=n,this.vault=s,this.stakePoolProgramId=c,this.coolDownSeconds=u,this.initalFeeBps=l,this.feeWallet=p,this.bumpSeed=f,this.reserved=m}static fromArgs(t){return new e(t.base,t.stakePool,t.poolMint,t.authority,t.vault,t.stakePoolProgramId,t.coolDownSeconds,t.initalFeeBps,t.feeWallet,t.bumpSeed,t.reserved)}static fromAccountInfo(t,r=0){return e.deserialize(t.data,r)}static async fromAccountAddress(t,r,i){let n=await t.getAccountInfo(r,i);if(n==null)throw new Error(`Unable to find StakePoolDepositStakeAuthority account at ${r}`);return e.fromAccountInfo(n,0)[0]}static gpaBuilder(t=new ku.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return ce.GpaBuilder.fromStruct(t,j.stakePoolDepositStakeAuthorityBeet)}static deserialize(t,r=0){return hu(t,r)}serialize(){return bu(this)}static get byteSize(){return j.stakePoolDepositStakeAuthorityBeet.byteSize}static async getMinimumBalanceForRentExemption(t,r){return t.getMinimumBalanceForRentExemption(e.byteSize,r)}static hasCorrectByteSize(t,r=0){return t.byteLength-r===e.byteSize}pretty(){return{base:this.base.toBase58(),stakePool:this.stakePool.toBase58(),poolMint:this.poolMint.toBase58(),authority:this.authority.toBase58(),vault:this.vault.toBase58(),stakePoolProgramId:this.stakePoolProgramId.toBase58(),coolDownSeconds:this.coolDownSeconds,initalFeeBps:this.initalFeeBps,feeWallet:this.feeWallet.toBase58(),bumpSeed:this.bumpSeed,reserved:this.reserved}}};j.StakePoolDepositStakeAuthority=Kr;j.stakePoolDepositStakeAuthorityBeet=new Ue.BeetStruct([["base",ce.publicKey],["stakePool",ce.publicKey],["poolMint",ce.publicKey],["authority",ce.publicKey],["vault",ce.publicKey],["stakePoolProgramId",ce.publicKey],["coolDownSeconds",Ue.u64],["initalFeeBps",Ue.u32],["feeWallet",ce.publicKey],["bumpSeed",Ue.u8],["reserved",Ue.uniformFixedSizeArray(Ue.u8,256)]],Kr.fromArgs,"StakePoolDepositStakeAuthority");var Ke=Au,bu=typeof Ke.serialize=="function"?Ke.serialize.bind(Ke):j.stakePoolDepositStakeAuthorityBeet.serialize.bind(j.stakePoolDepositStakeAuthorityBeet),hu=typeof Ke.deserialize=="function"?Ke.deserialize.bind(Ke):j.stakePoolDepositStakeAuthorityBeet.deserialize.bind(j.stakePoolDepositStakeAuthorityBeet)});var Ta=N(qt=>{"use strict";o();a();var Pu=qt&&qt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),wa=qt&&qt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pu(t,e,r)};Object.defineProperty(qt,"__esModule",{value:!0});qt.accountProviders=void 0;wa(Rr(),qt);wa(Ur(),qt);var vu=Ur(),wu=Rr();qt.accountProviders={StakePoolDepositStakeAuthority:vu.StakePoolDepositStakeAuthority,DepositReceipt:wu.DepositReceipt}});var Ma=N(et=>{"use strict";o();a();var Tu=et&&et.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Iu=et&&et.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),La=et&&et.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Tu(r,t,i[n]);return Iu(r,t),r}}();Object.defineProperty(et,"__esModule",{value:!0});et.changeDepositReceiptOwnerInstructionDiscriminator=et.ChangeDepositReceiptOwnerStruct=void 0;et.createChangeDepositReceiptOwnerInstruction=_u;var Ia=La(Tt()),_a=La(At());et.ChangeDepositReceiptOwnerStruct=new Ia.BeetArgsStruct([["instructionDiscriminator",Ia.u8]],"ChangeDepositReceiptOwnerInstructionArgs");et.changeDepositReceiptOwnerInstructionDiscriminator=4;function _u(e,t=new _a.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=et.ChangeDepositReceiptOwnerStruct.serialize({instructionDiscriminator:et.changeDepositReceiptOwnerInstructionDiscriminator}),i=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.currentOwner,isWritable:!1,isSigner:!0},{pubkey:e.newOwner,isWritable:!1,isSigner:!1}];return new _a.TransactionInstruction({programId:t,keys:i,data:r})}});var xa=N(rt=>{"use strict";o();a();var Lu=rt&&rt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Mu=rt&&rt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ci=rt&&rt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Lu(r,t,i[n]);return Mu(r,t),r}}();Object.defineProperty(rt,"__esModule",{value:!0});rt.claimPoolTokensInstructionDiscriminator=rt.ClaimPoolTokensStruct=void 0;rt.createClaimPoolTokensInstruction=xu;var Ou=Ci(Qe()),Oa=Ci(Tt()),Ri=Ci(At());rt.ClaimPoolTokensStruct=new Oa.BeetArgsStruct([["instructionDiscriminator",Oa.u8]],"ClaimPoolTokensInstructionArgs");rt.claimPoolTokensInstructionDiscriminator=5;function xu(e,t=new Ri.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=rt.ClaimPoolTokensStruct.serialize({instructionDiscriminator:rt.claimPoolTokensInstructionDiscriminator}),i=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.owner,isWritable:!0,isSigner:!0},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.feeWallet,isWritable:!0,isSigner:!1},{pubkey:e.depositAuthority,isWritable:!1,isSigner:!1},{pubkey:e.poolMint,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Ou.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ri.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Ri.TransactionInstruction({programId:t,keys:i,data:r})}});var Ni=N(Ut=>{"use strict";o();a();var Eu=Ut&&Ut.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Du=Ut&&Ut.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ea=Ut&&Ut.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Eu(r,t,i[n]);return Du(r,t),r}}();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.depositStakeArgsBeet=void 0;var Bu=Ea(Ee()),Fu=Ea(Tt());Ut.depositStakeArgsBeet=new Fu.BeetArgsStruct([["owner",Bu.publicKey]],"DepositStakeArgs")});var Ba=N(it=>{"use strict";o();a();var Ru=it&&it.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Cu=it&&it.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ui=it&&it.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Ru(r,t,i[n]);return Cu(r,t),r}}();Object.defineProperty(it,"__esModule",{value:!0});it.depositStakeInstructionDiscriminator=it.DepositStakeStruct=void 0;it.createDepositStakeInstruction=Uu;var Nu=Ui(Qe()),Da=Ui(Tt()),qi=Ui(At()),qu=Ni();it.DepositStakeStruct=new Da.BeetArgsStruct([["instructionDiscriminator",Da.u8],["depositStakeArgs",qu.depositStakeArgsBeet]],"DepositStakeInstructionArgs");it.depositStakeInstructionDiscriminator=2;function Uu(e,t,r=new qi.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=it.DepositStakeStruct.serialize({instructionDiscriminator:it.depositStakeInstructionDiscriminator,...t}),n=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Nu.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??qi.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new qi.TransactionInstruction({programId:r,keys:n,data:i})}});var Ki=N(Kt=>{"use strict";o();a();var Ku=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Wu=Kt&&Kt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ra=Kt&&Kt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Ku(r,t,i[n]);return Wu(r,t),r}}();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.depositStakeWithSlippageArgsBeet=void 0;var Fa=Ra(Tt()),Vu=Ra(Ee());Kt.depositStakeWithSlippageArgsBeet=new Fa.BeetArgsStruct([["owner",Vu.publicKey],["minimumPoolTokensOut",Fa.u64]],"DepositStakeWithSlippageArgs")});var Na=N(nt=>{"use strict";o();a();var ju=nt&&nt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),zu=nt&&nt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vi=nt&&nt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&ju(r,t,i[n]);return zu(r,t),r}}();Object.defineProperty(nt,"__esModule",{value:!0});nt.depositStakeWithSlippageInstructionDiscriminator=nt.DepositStakeWithSlippageStruct=void 0;nt.createDepositStakeWithSlippageInstruction=Hu;var Gu=Vi(Qe()),Ca=Vi(Tt()),Wi=Vi(At()),Qu=Ki();nt.DepositStakeWithSlippageStruct=new Ca.BeetArgsStruct([["instructionDiscriminator",Ca.u8],["depositStakeWithSlippageArgs",Qu.depositStakeWithSlippageArgsBeet]],"DepositStakeWithSlippageInstructionArgs");nt.depositStakeWithSlippageInstructionDiscriminator=3;function Hu(e,t,r=new Wi.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=nt.DepositStakeWithSlippageStruct.serialize({instructionDiscriminator:nt.depositStakeWithSlippageInstructionDiscriminator,...t}),n=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Gu.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Wi.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Wi.TransactionInstruction({programId:r,keys:n,data:i})}});var zi=N(Wt=>{"use strict";o();a();var Yu=Wt&&Wt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Ju=Wt&&Wt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qa=Wt&&Wt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Yu(r,t,i[n]);return Ju(r,t),r}}();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.initStakePoolDepositStakeAuthorityArgsBeet=void 0;var ji=qa(Tt()),$u=qa(Ee());Wt.initStakePoolDepositStakeAuthorityArgsBeet=new ji.BeetArgsStruct([["feeWallet",$u.publicKey],["coolDownSeconds",ji.u64],["initialFeeBps",ji.u32]],"InitStakePoolDepositStakeAuthorityArgs")});var Ka=N(ot=>{"use strict";o();a();var Xu=ot&&ot.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Zu=ot&&ot.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qi=ot&&ot.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&Xu(r,t,i[n]);return Zu(r,t),r}}();Object.defineProperty(ot,"__esModule",{value:!0});ot.initStakePoolDepositStakeAuthorityInstructionDiscriminator=ot.InitStakePoolDepositStakeAuthorityStruct=void 0;ot.createInitStakePoolDepositStakeAuthorityInstruction=rl;var tl=Qi(Qe()),Ua=Qi(Tt()),Gi=Qi(At()),el=zi();ot.InitStakePoolDepositStakeAuthorityStruct=new Ua.BeetArgsStruct([["instructionDiscriminator",Ua.u8],["initStakePoolDepositStakeAuthorityArgs",el.initStakePoolDepositStakeAuthorityArgsBeet]],"InitStakePoolDepositStakeAuthorityInstructionArgs");ot.initStakePoolDepositStakeAuthorityInstructionDiscriminator=0;function rl(e,t,r=new Gi.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=ot.InitStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:ot.initStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),n=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.vaultAta,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePool,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolMint,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??tl.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.associatedTokenProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Gi.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Gi.TransactionInstruction({programId:r,keys:n,data:i})}});var Hi=N(Vt=>{"use strict";o();a();var il=Vt&&Vt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),nl=Vt&&Vt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wa=Vt&&Vt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&il(r,t,i[n]);return nl(r,t),r}}();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.updateStakePoolDepositStakeAuthorityArgsBeet=void 0;var We=Wa(Tt()),ol=Wa(Ee());Vt.updateStakePoolDepositStakeAuthorityArgsBeet=new We.FixableBeetArgsStruct([["feeWallet",We.coption(ol.publicKey)],["coolDownSeconds",We.coption(We.u64)],["initialFeeBps",We.coption(We.u32)]],"UpdateStakePoolDepositStakeAuthorityArgs")});var Ga=N(at=>{"use strict";o();a();var al=at&&at.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),sl=at&&at.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),za=at&&at.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i=e(t),n=0;n<i.length;n++)i[n]!=="default"&&al(r,t,i[n]);return sl(r,t),r}}();Object.defineProperty(at,"__esModule",{value:!0});at.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=at.UpdateStakePoolDepositStakeAuthorityStruct=void 0;at.createUpdateStakePoolDepositStakeAuthorityInstruction=ul;var Va=za(Tt()),ja=za(At()),cl=Hi();at.UpdateStakePoolDepositStakeAuthorityStruct=new Va.FixableBeetArgsStruct([["instructionDiscriminator",Va.u8],["updateStakePoolDepositStakeAuthorityArgs",cl.updateStakePoolDepositStakeAuthorityArgsBeet]],"UpdateStakePoolDepositStakeAuthorityInstructionArgs");at.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=1;function ul(e,t,r=new ja.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=at.UpdateStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:at.updateStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),n=[{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!0},{pubkey:e.newAuthority??r,isWritable:!1,isSigner:!1}];return new ja.TransactionInstruction({programId:r,keys:n,data:i})}});var Qa=N(_t=>{"use strict";o();a();var ll=_t&&_t.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Ve=_t&&_t.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ll(t,e,r)};Object.defineProperty(_t,"__esModule",{value:!0});Ve(Ma(),_t);Ve(xa(),_t);Ve(Ba(),_t);Ve(Na(),_t);Ve(Ka(),_t);Ve(Ga(),_t)});var Ha=N(jt=>{"use strict";o();a();var dl=jt&&jt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Vr=jt&&jt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&dl(t,e,r)};Object.defineProperty(jt,"__esModule",{value:!0});Vr(Ni(),jt);Vr(Ki(),jt);Vr(zi(),jt);Vr(Hi(),jt)});var Ji=N(dt=>{"use strict";o();a();var pl=dt&&dt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Yi=dt&&dt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pl(t,e,r)};Object.defineProperty(dt,"__esModule",{value:!0});dt.PROGRAM_ID=dt.PROGRAM_ADDRESS=void 0;var ml=At();Yi(Ta(),dt);Yi(Qa(),dt);Yi(Ha(),dt);dt.PROGRAM_ADDRESS="5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV";dt.PROGRAM_ID=new ml.PublicKey(dt.PROGRAM_ADDRESS)});var Zi=N(P=>{"use strict";o();a();var fl=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});P.map=P.array=P.rustEnum=P.str=P.vecU8=P.tagged=P.vec=P.bool=P.option=P.publicKey=P.i256=P.u256=P.i128=P.u128=P.i64=P.u64=P.struct=P.f64=P.f32=P.i32=P.u32=P.i16=P.u16=P.i8=P.u8=void 0;var F=ii(),Sl=At(),yl=fl(ur()),$t=ii();Object.defineProperty(P,"u8",{enumerable:!0,get:function(){return $t.u8}});Object.defineProperty(P,"i8",{enumerable:!0,get:function(){return $t.s8}});Object.defineProperty(P,"u16",{enumerable:!0,get:function(){return $t.u16}});Object.defineProperty(P,"i16",{enumerable:!0,get:function(){return $t.s16}});Object.defineProperty(P,"u32",{enumerable:!0,get:function(){return $t.u32}});Object.defineProperty(P,"i32",{enumerable:!0,get:function(){return $t.s32}});Object.defineProperty(P,"f32",{enumerable:!0,get:function(){return $t.f32}});Object.defineProperty(P,"f64",{enumerable:!0,get:function(){return $t.f64}});Object.defineProperty(P,"struct",{enumerable:!0,get:function(){return $t.struct}});var ue=class extends F.Layout{constructor(t,r,i){super(t,i),this.blob=(0,F.blob)(t),this.signed=r}decode(t,r=0){let i=new yl.default(this.blob.decode(t,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,r,i=0){return this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,i)}};function Ya(e){return new ue(8,!1,e)}P.u64=Ya;function gl(e){return new ue(8,!0,e)}P.i64=gl;function kl(e){return new ue(16,!1,e)}P.u128=kl;function Al(e){return new ue(16,!0,e)}P.i128=Al;function bl(e){return new ue(32,!1,e)}P.u256=bl;function hl(e){return new ue(32,!0,e)}P.i256=hl;var zt=class extends F.Layout{constructor(t,r,i,n){super(t.span,n),this.layout=t,this.decoder=r,this.encoder=i}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,i){return this.layout.encode(this.encoder(t),r,i)}getSpan(t,r){return this.layout.getSpan(t,r)}};function Pl(e){return new zt((0,F.blob)(32),t=>new Sl.PublicKey(t),t=>t.toBuffer(),e)}P.publicKey=Pl;var $i=class extends F.Layout{constructor(t,r){super(-1,r),this.layout=t,this.discriminator=(0,F.u8)()}encode(t,r,i=0){return t==null?this.discriminator.encode(0,r,i):(this.discriminator.encode(1,r,i),this.layout.encode(t,r,i+1)+1)}decode(t,r=0){let i=this.discriminator.decode(t,r);if(i===0)return null;if(i===1)return this.layout.decode(t,r+1);throw new Error("Invalid option "+this.property)}getSpan(t,r=0){let i=this.discriminator.decode(t,r);if(i===0)return 1;if(i===1)return this.layout.getSpan(t,r+1)+1;throw new Error("Invalid option "+this.property)}};function vl(e,t){return new $i(e,t)}P.option=vl;function wl(e){return new zt((0,F.u8)(),Tl,Il,e)}P.bool=wl;function Tl(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function Il(e){return e?1:0}function _l(e,t){let r=(0,F.u32)("length"),i=(0,F.struct)([r,(0,F.seq)(e,(0,F.offset)(r,-r.span),"values")]);return new zt(i,({values:n})=>n,n=>({values:n}),t)}P.vec=_l;function Ll(e,t,r){let i=(0,F.struct)([Ya("tag"),t.replicate("data")]);function n({tag:s,data:c}){if(!s.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+s.toString("hex"));return c}return new zt(i,n,s=>({tag:e,data:s}),r)}P.tagged=Ll;function Ja(e){let t=(0,F.u32)("length"),r=(0,F.struct)([t,(0,F.blob)((0,F.offset)(t,-t.span),"data")]);return new zt(r,({data:i})=>i,i=>({data:i}),e)}P.vecU8=Ja;function Ml(e){return new zt(Ja(),t=>t.toString("utf-8"),t=>Buffer.from(t,"utf-8"),e)}P.str=Ml;function Ol(e,t,r){let i=(0,F.union)(r??(0,F.u8)(),t);return e.forEach((n,s)=>i.addVariant(s,n,n.property)),i}P.rustEnum=Ol;function xl(e,t,r){let i=(0,F.struct)([(0,F.seq)(e,t,"values")]);return new zt(i,({values:n})=>n,n=>({values:n}),r)}P.array=xl;var Xi=class extends F.Layout{constructor(t,r,i){super(t.span+r.span,i),this.keyLayout=t,this.valueLayout=r}decode(t,r){r=r||0;let i=this.keyLayout.decode(t,r),n=this.valueLayout.decode(t,r+this.keyLayout.getSpan(t,r));return[i,n]}encode(t,r,i){i=i||0;let n=this.keyLayout.encode(t[0],r,i),s=this.valueLayout.encode(t[1],r,i+n);return n+s}getSpan(t,r){return this.keyLayout.getSpan(t,r)+this.valueLayout.getSpan(t,r)}};function El(e,t,r){let i=(0,F.u32)("length"),n=(0,F.struct)([i,(0,F.seq)(new Xi(e,t),(0,F.offset)(i,-i.span),"values")]);return new zt(n,({values:s})=>new Map(s),s=>({values:Array.from(s.entries())}),r)}P.map=El});var $a=N(jr=>{"use strict";o();a();Object.defineProperty(jr,"__esModule",{value:!0});jr.depositStake=void 0;var gt=At(),tn=Ji(),en=Qe(),pt=Zi(),rn=new gt.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy"),Dl=(0,pt.struct)([(0,pt.u8)("accountType"),(0,pt.publicKey)("manager"),(0,pt.publicKey)("staker"),(0,pt.publicKey)("stakeDepositAuthority"),(0,pt.u8)("stakeWithdrawBumpSeed"),(0,pt.publicKey)("validatorList"),(0,pt.publicKey)("reserveStake"),(0,pt.publicKey)("poolMint"),(0,pt.publicKey)("managerFeeAccount"),(0,pt.publicKey)("tokenProgramId"),(0,pt.u64)("totalLamports"),(0,pt.u64)("poolTokenSupply"),(0,pt.u64)("lastUpdateEpoch")]),Bl=async(e,t)=>{let r=await e.getAccountInfo(t);if(!r)throw new Error("Stake pool account not found");let i=Dl.decode(r.data);return{pubkey:t,account:{data:i}}},Fl=async(e,t,r,i,n,s,c,u)=>{let l=await Bl(e,r),p=await tn.StakePoolDepositStakeAuthority.fromAccountAddress(e,l.account.data.stakeDepositAuthority),f=await Rl(rn,r),m=await Cl(rn,n,r),y=[],g=[],k=gt.Keypair.generate(),h=l.account.data.poolMint;if(g.push(k),!c){let x=(0,en.getAssociatedTokenAddressSync)(h,i);y.push((0,en.createAssociatedTokenAccountIdempotentInstruction)(i,x,i,h)),c=x}y.push(...gt.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:i,newAuthorizedPubkey:l.account.data.stakeDepositAuthority,stakeAuthorizationType:gt.StakeAuthorizationLayout.Staker}).instructions),y.push(...gt.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:i,newAuthorizedPubkey:l.account.data.stakeDepositAuthority,stakeAuthorizationType:gt.StakeAuthorizationLayout.Withdrawer}).instructions);let[A]=gt.PublicKey.findProgramAddressSync([Buffer.from("deposit_receipt"),r.toBuffer(),k.publicKey.toBuffer()],tn.PROGRAM_ID),v={depositStakeArgs:{owner:i}},O={payer:t,stakePoolProgram:rn,depositReceipt:A,stakePool:r,validatorStakeList:l.account.data.validatorList,depositStakeAuthority:l.account.data.stakeDepositAuthority,base:k.publicKey,stakePoolWithdrawAuthority:f,stake:s,validatorStakeAccount:m,reserveStakeAccount:l.account.data.reserveStake,vault:p.vault,managerFeeAccount:l.account.data.managerFeeAccount,referrerPoolTokensAccount:c,poolMint:h,clock:gt.SYSVAR_CLOCK_PUBKEY,stakeHistory:gt.SYSVAR_STAKE_HISTORY_PUBKEY,tokenProgram:en.TOKEN_PROGRAM_ID,stakeProgram:gt.StakeProgram.programId,systemProgram:gt.SystemProgram.programId},L=(0,tn.createDepositStakeInstruction)(O,v);return u?.length&&L.keys.push(...u),y.push(L),{instructions:y,signers:g}};jr.depositStake=Fl;var Rl=(e,t)=>{let[r]=gt.PublicKey.findProgramAddressSync([t.toBuffer(),Buffer.from("withdraw")],e);return r},Cl=(e,t,r)=>{let[i]=gt.PublicKey.findProgramAddressSync([t.toBuffer(),r.toBuffer(),Buffer.alloc(0)],e);return i}});var Za=N(le=>{"use strict";o();a();var Nl=le&&le.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Xa=le&&le.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Nl(t,e,r)};Object.defineProperty(le,"__esModule",{value:!0});Xa(Ji(),le);Xa($a(),le)});o();a();o();a();o();a();var Ht="@phantom/interstitials",Fe=`${Ht}:action-banners`,eo=`${Ht}:force-upgrade`,W={actionBanners:(e,t)=>[Fe,{accountIdentifier:e,accessToken:t}],hasSeenInterstitial:e=>[`${Ht}:has-seen-interstitial`,{feature:e}],interstitialViewHistory:e=>[`${Ht}:interstitial-view-history`,{feature:e}],appLaunchTimes:()=>[`${Ht}:app-launch-times`],lastOnboardedAt:()=>[`${Ht}:last-onboarded-at`]};o();a();o();a();var kr=(A=>(A.Buy="Buy",A.Collectibles="Collectibles",A.ConnectHardwareWallet="Connect Hardware Wallet",A.ConvertToJito="Convert to Jito",A.MintPSOL="Mint PSOL",A.Explore="Explore",A.MintCollectible="Mint Collectible",A.SocialLogin="Social Login",A.SettingsClaimUsername="Settings: Claim Username",A.SettingsCurrency="Settings: Currency",A.SettingsImportSeedPhrase="Settings: Import Seed Phrase",A.SettingsNotificationPreferences="Settings: Notification Preferences",A.SettingsSecurityAndPrivacy="Settings: Security & Privacy",A.Swapper="Swapper",A.ExternalLink="External Link",A.Token="Token",A))(kr||{}),He=class extends Error{message="Failed to set dismissed action banners to storage"};var hs={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1,StakingWelcome:1,SocialFeedNux:1,SocialFeedNuxWelcome:1},Ps={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,StakingWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1,SocialFeedNux:1,SocialFeedNuxWelcome:1},oi=e=>dr?hs[e]:Sn?Ps[e]:-1;var Ar=1,Dt=".phantom-labs.settings.interstitials",Yt=class{static async getViewHistory(t,r){let i=await r.get(Dt);return i?i.interstitialsViewHistory[t]??[]:[]}static async hasSeen(t,r){let i=await r.get(Dt);if(!i)return!1;let n=oi(t);return(i.interstitialsSeen[t]??0)>=n}static async setHasSeen(t,r){let i=await r.get(Dt),n=oi(t);await r.set(Dt,{version:Ar,interstitialsSeen:{...!!i&&i.interstitialsSeen,[t]:n},interstitialsViewHistory:{...!!i&&i.interstitialsViewHistory,[t]:[...i?.interstitialsViewHistory?.[t]??[],Date.now()]}})}static async resetHasSeen(t,r){let i=await r.get(Dt);if(i)return r.set(Dt,{version:Ar,interstitialsSeen:{...i.interstitialsSeen,[t]:void 0},interstitialsViewHistory:{...i.interstitialsViewHistory,[t]:void 0}})}static async resetAllHasSeen(t){if(await t.get(Dt))return t.set(Dt,{version:Ar,interstitialsSeen:{},interstitialsViewHistory:{}})}},vs={...In(Dt,[`${Ht}:has-seen-interstitial`,`${Ht}:interstitial-view-history`],(e,t)=>({version:Ar,interstitialsSeen:{...e?.interstitialsSeen,...t?.interstitialsSeen},interstitialsViewHistory:{...e?.interstitialsViewHistory,...t?.interstitialsViewHistory}}))};o();a();var ai=class{#t;constructor(t){this.#t=t}onBannerSeen=t=>{this.#t.capture("actionBannerSeenByUser",{data:{banner:t}})};onBannerClick=t=>{this.#t.capture("actionBannerClickedByUser",{data:{banner:t}})};onBannerDismiss=t=>{this.#t.capture("actionBannerDismissedByUser",{data:{banner:t}})};onInterstitialSeen=t=>{this.#t.capture("actionBannerInterstitialSeenByUser",{data:{banner:t}})};onInterstitialPrimaryClick=t=>{this.#t.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:t}})};onInterstitialSecondaryClick=t=>{this.#t.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:t}})};onInterstitialDismiss=t=>{this.#t.capture("actionBannerInterstitialDismissedByUser",{data:{banner:t}})}};o();a();var ws=({id:e,humanReadableId:t,description:r,bannerType:i})=>({id:e,humanReadableId:t,description:r,type:i}),Ts=({id:e,humanReadableId:t,description:r,bannerType:i,interstitial:n})=>{let{title:s,primaryButtonText:c,secondaryButtonText:u}=n,l;if(i==="Modal")for(let[p,f]of Object.values(n.lineItems).entries())l={...l??{},[`lineItem${p+1}`]:{title:f.title,description:f.description}};return{id:e,humanReadableId:t,description:r,type:i,interstitial:{title:s,body:l,primaryButtonText:c??T.t("commandContinue"),secondaryButtonText:u??T.t("commandDismiss")}}};o();a();o();a();var br=e=>{let t=[];for(let r in e.errors)Array.isArray(e.errors[r])&&t.push(e.errors[r].join(", "));return t.join(", ")};var io=async({locale:e})=>{let t;try{let r=JSON.stringify({platform:lr,appVersion:_e,locale:e}),i=await ht.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,r);if(i.status===400){let s=await i.data,c=br(s);throw new Error(c)}else if(i.status<200||i.status>299)throw new Error(`status code: ${i.status}, body: ${i.statusText}`);let n=i.data;return n?{...n}:ro}catch(r){return t===400&&r instanceof Error&&$.captureError(r,"actionBanner"),ro}},ro={forceUpgradeStatus:"noop"};o();a();o();a();var no=async({locale:e})=>({...await io({locale:e})});var Is=()=>_({queryKey:[eo],queryFn:async()=>{let t=pr(T.language)??"en";return no({locale:t})},enabled:!!_e,staleTime:U({minutes:5})});o();a();var ci=e=>{let t=Oe(),r=W.hasSeenInterstitial(e);return _({queryKey:r,queryFn:async()=>await Yt.hasSeen(e,t)})};o();a();o();a();var oo=async e=>{await e.invalidateQueries({queryKey:[Fe]})};_n(oo);var ao=async(e,t,r)=>{await e.setQueryData(W.hasSeenInterstitial(t),r)};var Mt=e=>{let t=Oe(),r=X();return vt({mutationFn:async()=>{await Yt.setHasSeen(e,t),await ao(r,e,!0)},onSuccess:()=>r.invalidateQueries({queryKey:W.interstitialViewHistory(e)})})};o();a();o();a();o();a();var ui=async e=>await e.get("dismissedActionBanners")??[],so=async(e,t)=>{try{let r=await ui(e);return r.includes(t)?void 0:e.set("dismissedActionBanners",[...r,t])}catch{throw new He}};o();a();o();a();var uo=async({accountID:e,deviceId:t,locale:r,rootId:i,selectedAccountAddresses:n,accessToken:s})=>{let c;try{let u={accountID:e,deviceId:t,locale:r,platform:lr,rootId:i,selectedAccountAddresses:n,version:_e},l=await ht.api().headers({"Content-Type":"application/json"}).bearer(s).post(({apiEnv:f})=>`/banners/get_banners/${f}/v2`,u);if(l.status===400){let f=await l.data,m=br(f);throw new Error(m)}else if(l.status<200||l.status>299)throw new Error(`status code: ${l.status}, body: ${await l.statusText}`);let p=l.data;return p?{...p,banners:p.banners??[]}:co}catch(u){return c===400&&u instanceof Error&&$.captureError(u,"actionBanner"),co}},co={id:void 0,banners:[]};o();a();o();a();var li=e=>e?Object.values(kr).includes(e):!1;o();a();var lo=e=>{switch(e){case"Bottom Sheet":return dr;case"Modal":return!0;default:return!1}};var po=e=>{let{bannerType:t,destinationType:r}=e;switch(t){case"Deep Link":return li(r);case"Bottom Sheet":case"Modal":return lo(t)&&li(r);default:return!1}};var mo=async({accountID:e,deviceId:t,dismissedBanners:r,locale:i,rootId:n,selectedAccountAddresses:s,accessToken:c})=>{let u=await uo({accountID:e,deviceId:t,locale:i,rootId:n,selectedAccountAddresses:s,accessToken:c});return{...u,banners:u.banners.filter(l=>po(l)&&!r.includes(l.id))}};var Ls=U({minutes:1}),Ms=()=>{let e=re(),t=Q(),{data:r,isLoading:i}=Mn(),{data:n}=xe(),s=async()=>{let c=n?.type!=="readOnly"?n?.addresses.map(wn)??[]:[],u=n?.type==="seed"?n.seedIdentifier:null,l=await ui(t),p=pr(T.language)??"en",f=await e.getDeviceId();return mo({accountID:n?.identifier??"",deviceId:f,dismissedBanners:l,locale:p,rootId:u,selectedAccountAddresses:c,accessToken:r?.accessToken})};return _({queryKey:W.actionBanners(n?.identifier,r?.accessToken),queryFn:s,enabled:!i&&!!n?.identifier,staleTime:Ls})};o();a();var pi=()=>{let e=Q(),{data:t}=_({queryKey:W.appLaunchTimes(),queryFn:async()=>await e.get("appLaunchTimes")??[]});return t??[]};o();a();var Os=()=>{let e=Q(),t=X();return vt({mutationFn:async({actionBannerId:i})=>{so(e,i),t.setQueriesData({queryKey:[Fe]},n=>{if(!n)return;let s=n.banners.filter(c=>c.id!==i);return{...n,banners:s}})}})};o();a();var xs=e=>{let t=Oe(),r=W.interstitialViewHistory(e);return _({queryKey:r,queryFn:async()=>await Yt.getViewHistory(e,t)})};o();a();var hr=I(E());o();a();o();a();var mi=()=>{let e=Q(),{data:t}=_({queryKey:W.lastOnboardedAt(),queryFn:async()=>await e.get("lastOnboardedAt")??-1});return t};var fo=()=>{let e=mi(),t=pi();if(t.length<2)return!0;if(e!==void 0){let[r,i]=t;if(e<r&&e<i)return!1}return!0};function ke(e,t,r){let{data:i,isSuccess:n}=ci(e),{data:s}=ee(t?[t]:[]),c=s?.length===1?s[0]:!0,u=fo(),l=(0,hr.useCallback)(()=>r(),[r]);return(0,hr.useMemo)(()=>c&&n&&!i&&!u&&l(),[c,i,u,l,n])}o();a();var Es=()=>{let e=Q(),t=X();return vt({mutationFn:async()=>{let r=Date.now(),n=[...(await e.get("appLaunchTimes")||[]).slice(-1),r];return e.set("appLaunchTimes",n)},onSuccess:()=>{t.invalidateQueries({queryKey:W.appLaunchTimes()})}})};o();a();var Ds=()=>{let e=Q(),t=X();return vt({mutationFn:()=>{let r=Date.now();return e.set("lastOnboardedAt",r)},onSuccess:()=>{t.invalidateQueries({queryKey:W.lastOnboardedAt()})}})};o();a();var Jt=I(E());var Bs="Google Pay",Fs="Apple Pay",So={data:{feature:"sui",variant:"default-on"}},Rs=({onPrimaryAction:e,image:t,condition:r=()=>!0,platform:i="ios"})=>{let{t:n}=ct(),{mutate:s}=Mt("SuiWelcomeDefaultOn"),{data:c}=ee(["kill-sui-default-on-modal"]),u=c?.length===1?c[0]:!0,l=ke("SuiWelcomeDefaultOn",void 0,()=>r()&&!Ie()&&!u),p=i==="android"?Bs:Fs,f=(0,Jt.useCallback)(async()=>{e(),s()},[e,s]),m=(0,Jt.useMemo)(()=>({title:n("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:n("interstitialSuiWelcomeItemTitle_1"),icon:Jt.default.createElement(wt,{icon:"Swap",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:n("interstitialSuiWelcomeItemTitle_2"),icon:Jt.default.createElement(wt,{icon:"Send",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_2",{paymentMethod:p})},{key:"suiValueProp3",title:n("interstitialSuiWelcomeItemTitle_3"),icon:Jt.default.createElement(wt,{icon:"Compass",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialSuiWelcomePrimaryButtonText"),onAction:f,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:So}},onDismiss:s,image:t,displayEvent:{event:"welcomeInterstitialSeen",payload:So}}),[n,f,t,s,p]);return(0,Jt.useMemo)(()=>({interstitial:m,shouldShow:l}),[m,l])};o();a();var Bt=I(E());var fi={data:{feature:"arbitrum"}},Cs=({onPrimaryAction:e,onSecondaryAction:t,image:r,condition:i=()=>!0})=>{let{t:n}=ct(),{mutateAsync:s}=xn(),[c]=En(["arbitrum"]),{mutate:u}=Mt("ArbitrumWelcome"),l=ke("ArbitrumWelcome","enable-arbitrum",()=>i()&&!c&&!Ie()),p=(0,Bt.useCallback)(async()=>{await s({chainIDs:["arbitrum"]}),e(),u()},[s,e,u]),f=(0,Bt.useCallback)(()=>{t(),u()},[t,u]),m=(0,Bt.useMemo)(()=>({title:n("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:n("interstitialArbitrumWelcomeItemTitle_1"),icon:Bt.default.createElement(wt,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:n("interstitialArbitrumWelcomeItemTitle_2"),icon:Bt.default.createElement(wt,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:n("interstitialArbitrumWelcomeItemTitle_3"),icon:Bt.default.createElement(wt,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialArbitrumWelcomePrimaryButtonText"),onAction:p,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:fi}},secondaryButton:{children:n("commandNotNow"),onAction:f,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:fi}},onDismiss:u,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:fi}}),[n,p,f,r,u]);return(0,Bt.useMemo)(()=>({interstitial:m,shouldShow:l}),[m,l])};o();a();var Ft=I(E());var Si={data:{feature:"staking"}},Ns=({onPrimaryAction:e,onSecondaryAction:t,image:r,condition:i=()=>!0})=>{let{t:n}=ct(),{mutate:s}=Mt("StakingWelcome"),c=ke("StakingWelcome","enable-psol-welcome-modal",()=>i()&&!Ie()),u=(0,Ft.useCallback)(()=>{e(),s()},[e,s]),l=(0,Ft.useCallback)(()=>{t(),s()},[t,s]),p=(0,Ft.useMemo)(()=>({title:void 0,mobileTitleSheetInset:yn,items:[{key:"stakingValueProp1",title:n("stakingInterstitialWelcomeItemTitle_1"),icon:Ft.default.createElement(wt,{icon:"InfoCircle",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:n("stakingInterstitialWelcomeItemTitle_2"),icon:Ft.default.createElement(wt,{icon:"TrendingUp",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:n("stakingInterstitialWelcomeItemTitle_3"),icon:Ft.default.createElement(wt,{icon:"Shield",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:n("stakingInterstitialWelcomePrimaryButtonText"),onAction:u,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Si},theme:"success"},secondaryButton:{children:n("commandNotNow"),onAction:l,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Si}},onDismiss:s,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:Si},disclaimers:[n("mintStakeInfoPageDisclaimer1"),n("mintStakeInfoPageDisclaimer2_US")]}),[n,u,l,r,s]);return(0,Ft.useMemo)(()=>({interstitial:p,shouldShow:c}),[p,c])};o();a();o();a();o();a();o();a();var Ae=I(E());var yi=Ae.default.memo(e=>{let{children:t,i18nKey:r,...i}=e,{t:n}=ct(),s=(0,Ae.useMemo)(()=>{let u=(r?`${n(r,{...i,...i.values})}`:"").replace(/<\/?[^>]+(>|$)/g,"");return Ae.default.createElement(Se,null,u)},[r,i,n]);return Ae.default.createElement(Fn,{fallback:s},Ae.default.createElement(kn,{i18nKey:r,...i},t))});var ut=I(E());var qs="https://phantom.com/terms",Us="https://phantom.com/privacy",Ks="https://phantom.com/terms-and-privacy-update",Ws=({onConfirm:e,openUrl:t})=>{let{t:r}=ct(),i=re(),{mutate:n}=Mt("TermsOfServiceUpdate"),s=(0,ut.useCallback)(async()=>{n(),e()},[n,e]),c=(0,ut.useCallback)(l=>async()=>{await i.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await t(l)},[i,t]),u=(0,ut.useMemo)(()=>({title:r("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:r("commandContinue"),onAction:s,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:ut.default.createElement(Vs,{openUrl:c}),dismissGestureDisabled:!0}),[r,s,c]);return(0,ut.useMemo)(()=>({interstitial:u}),[u])},Vs=({openUrl:e})=>ut.default.createElement(Bn,{marginTop:24},ut.default.createElement(Se,{font:"body",align:"center"},ut.default.createElement(yi,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",ut.default.createElement(Se,{onPress:e(qs),color:"accentPrimary"},"Terms of Service"),"and",ut.default.createElement(Se,{onPress:e(Us),color:"accentPrimary"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",ut.default.createElement(Se,{onPress:e(Ks),color:"accentPrimary"},"Learn More"),".")));o();a();o();a();o();a();var Pr=I(bs(),1);var ko=I(At(),1);var go=(0,Pr.struct)([(0,Pr.u8)("instruction"),Rn("amount")]);function gi(e,t,r,i,n=[],s=ye){let c=Nn([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1}],r,n),u=Buffer.alloc(go.span);return go.encode({instruction:Cn.Approve,amount:BigInt(i)},u),new ko.TransactionInstruction({keys:c,programId:s,data:u})}var Ao=new S.PublicKey("Config1111111111111111111111111111111111111"),zs="https://docs.solana.com/staking",Gs="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating",Rt={type:"SolanaNative",data:{amount:"0",balance:new J(0),chain:{id:q.solana.mainnetID,imageUrl:q.solana.iconUrl,name:q.solana.name,symbol:q.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"NOT_VERIFIED"}},bo=new Map([[tt.Solana.Mainnet,Rt]]),Qs="https://www.jito.network/blog/lsts-vs-native-assets/",ki="https://www.jito.network/staking/?mode=unstake",Ai="https://help.phantom.com/hc/en-us/articles/29846774040467",Hs="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Ys="https://www.jito.network/interceptor";var bi="https://app.kamino.finance/lending/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",oe="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",vr=4e6,Je=2282880;o();a();function ho(e,t){let r=new R(e/100),i=new R(t/100);return r.minus(r.times(i)).times(100).decimalPlaces(2).toNumber()}o();a();o();a();o();a();var Y="staking";var hi=[Y,"stakeAccounts"],Pi=[Y,"stakeActivationData"],vi=[Y,"convertStakeAccountList"],wi=[Y,"convertStakeTransaction"],Ti=[Y,"mintTokenTransaction"],Js=[Y,"withdrawLiquidStakeTransaction"],Ii="averageValidatorApy",$s="recommendedValidators",Xs="signatureStatus",Zs="stakeAccountMinBalance",tc="stakeRewardsHistory",ec="stakeApy",rc="validatorInfo",ic="voteAccounts",nc="keybaseUserAvatar",B={keybaseUserAvatar(e){return[Y,nc,e]},signatureStatus(e){return[Y,Xs,e]},stakeAccounts(e,t){return[...hi,e,t]},stakeAccountMinBalance(){return[Y,Zs]},stakeActivationData(e){return[...Pi,e]},stakeRewardsHistory(e){return[Y,tc,e]},stakeApy(){return[Y,ec]},averageValidatorApy(){return[Y,Ii]},recommendedValidators(){return[Y,$s]},validatorInfo(){return[Y,rc]},voteAccounts(e){return[Y,ic,e]},convertStakeAccountList(e,t){return[...vi,e,t]},liquidStakingSupportedTokens(){return[Y,"liquidStakingSupportedTokens"]},getConvertStakeTransaction(e){return[...wi,e]},getMintTokenTransaction(e){return[...Ti,e]},getWithdrawLiquidStakeTransaction(e){return[...Js,e]},featureUsed(){return[Y,"featureUsed"]}};var $e=e=>()=>{e.invalidateQueries({predicate:t=>{let r=i=>i.every((n,s)=>t.queryKey[s]===n);return r(hi)||r(Pi)||r(vi)||r(wi)||r(Ti)}})};o();a();function wr(e,t=9){return e.match(new RegExp(`^\\d*(\\.\\d{0,${t}})?$`))}o();a();var Po={type:"fungible",isNativeOfType:"sol",chain:"solana",name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},oc="stake",vo=e=>new _i(e,oc),_i=class extends gr{createStakeAccountAndDelegateStake=t=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...t,...Po}})};deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:{...Po}})}};var ac=An(re,e=>vo(e));o();a();var Tr=I(E());o();a();var To=(e,t)=>e+t[1];function Io(e){let t=sc(e),r={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},i=uc(t.maxEpochCredits,t.maxActivatedStake,r);return e.sort(i)}function sc(e){let t={maxEpochCredits:0,maxActivatedStake:0};for(let r of e){let i=r.epochCredits.reduce(To,0);t.maxEpochCredits<i&&(t.maxEpochCredits=i),t.maxActivatedStake<r.activatedStake&&(t.maxActivatedStake=r.activatedStake)}return t}function cc(e,t,r,i,n){let s=(100-e)/100,c=t/r,u=Math.log10(i+1)/Math.log10(n+1);return{normalizedCommission:s,normalizedEpochCredits:c,normalizedActivatedStake:u}}function wo(e,t,r,i){let{commission:n,epochCredits:s,activatedStake:c}=e,{commissionWeight:u,epochCreditsWeight:l,activatedStakeWeight:p}=i,{normalizedCommission:f,normalizedEpochCredits:m,normalizedActivatedStake:y}=cc(n,s.reduce(To,0),t,c,r);return(n>10?.5:1)*(u*f+l*m+p*y)}function uc(e,t,r){return(i,n)=>{let s=wo(i,e,t,r);return wo(n,e,t,r)-s}}o();a();o();a();var Xe=(n=>(n[n.Always=1/0]="Always",n[n.Short=U({days:1})]="Short",n[n.Medium=U({days:3})]="Medium",n[n.Long=U({days:7})]="Long",n))(Xe||{}),Ot=(s=>(s[s.Immediate=0]="Immediate",s[s.Short=U({minutes:1})]="Short",s[s.Medium=U({minutes:2.5})]="Medium",s[s.Long=U({minutes:5})]="Long",s[s.Never=1/0]="Never",s))(Ot||{});var lc=e=>async()=>(await e.getParsedProgramAccounts(Ao)).reduce((r,i)=>{if(i.account.data.parsed?.type!=="validatorInfo")return r;let n=i.pubkey.toString(),s=i.account.data.parsed.info.keys,[,c]=s;if(!c.signer)return r;let u=c.pubkey,l=i.account.data.parsed.info.configData;return r.push({identityPubkey:u,infoPubkey:n,info:l}),r},[]);function Li(e){let t=B.validatorInfo(),r=lc(e);return _({queryKey:t,queryFn:r,placeholderData:[],staleTime:1/0})}o();a();var dc=async e=>{let t=await e.getVoteAccounts();return[...t.current,...t.delinquent].map(r=>({identityPubkey:r.nodePubkey,voteAccountPubkey:r.votePubkey,commission:r.commission,lastVote:r.lastVote,epochCredits:r.epochCredits,activatedStake:r.activatedStake})).filter(r=>r.commission<99)};function Mi(e){let t=B.voteAccounts(e.rpcEndpoint);return _({queryKey:t,queryFn:async()=>dc(e),placeholderData:[],staleTime:1/0})}function Ir(e){let{isFetched:t,isFetching:r,isPending:i,isSuccess:n,isError:s,dataUpdatedAt:c,errorUpdatedAt:u,error:l,refetch:p,data:f}=Mi(e),m=Math.max(c,u),{isFetched:y,isFetching:g,isPending:k,isSuccess:h,isError:A,dataUpdatedAt:v,errorUpdatedAt:O,error:L,refetch:x,data:z}=Li(e),ft=Math.max(v,O),Lt=Math.max(m,ft),M=t&&y,kt=r||g,St=n||h,Z=s||A,st=l||L,Gt=i||k,Xt=(0,Tr.useCallback)(async()=>{Promise.all([p(),x()])},[x,p]);return{results:(0,Tr.useMemo)(()=>{if(!f)return[];if(!z)return[];let we=Io(f),pe=new Map(we.map(C=>[C.identityPubkey,C])),Te=new Map(z.map(C=>[C.identityPubkey,C])),me=[];for(let[C,Et]of pe){let K=Te.get(C);me.push({...Et,...K})}return me},[z,f]),dataUpdatedAt:Lt,error:st,isSuccess:St,isError:Z,isFetched:M,isFetching:kt,isPending:Gt,refetch:Xt}}o();a();function Oi(e){let t=!!e?.info.meta.lockup,r=new Date((e?.info.meta.lockup?.unixTimestamp??0)*1e3);return t&&r.getTime()>Date.now()}o();a();o();a();var _o=({numSignatures:e,lamportsPerSignature:t,lamportBalance:r,rentExemptionMinimum:i})=>{let n=J(t).multipliedBy(e),s=r.minus(n);return J.max(s.minus(i),0)};var pc=({balance:e,rentExemptionMinimum:t})=>{let r=_o({numSignatures:11,lamportsPerSignature:Wn,lamportBalance:J(e),rentExemptionMinimum:fn(t)});return parseFloat(mn(r).toFixed(9))};o();a();o();a();var mc="https://keybase.io/_/api/1.0/user/pic_url.json",_r=async e=>{let t=await ht.get(`${mc}?username=${encodeURIComponent(e)}`);if(!te(t)||t.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return t.data.pic_url};var fc=e=>{let t=B.keybaseUserAvatar(e);return _({enabled:!!e,queryKey:t,async queryFn(){if(!e)throw new Error("Keybase username is required");return _r(e)},placeholderData:"",staleTime:1/0})};o();a();o();a();var Ig=new Error("Missing sender address for staking fungibles."),Lo=new Error("Missing signature from waiting for staking transaction confirmation."),Mo=new Error("PublicKey is required");var be=class extends Error{constructor(t){super(t)}};var Sc=async(e,t)=>await e.getSignatureStatuses([t],{searchTransactionHistory:!0});function yc(e,t,r){let i=X(),n=B.signatureStatus(r),s=async()=>{if(!r)throw Lo;let p=await Sc(e,r);return{...p,value:p.value[0]}},u=i.getQueryData(n)?.value?.confirmationStatus;return _({queryKey:n,queryFn:s,enabled:!!r&&u!=="finalized",refetchInterval:t,staleTime:1/0})}o();a();var gc=e=>async()=>await e.getMinimumBalanceForRentExemption(S.StakeProgram.space);function kc(e){let t=B.stakeAccountMinBalance(),r=gc(e);return _({queryKey:t,queryFn:r,placeholderData:0,staleTime:1/0})}o();a();var Ac=async(e,t,r,i="confirmed")=>await e.getInflationReward(t,r,i),bc=async(e,t)=>{let r=[];t.ownerPublicKey&&r.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&r.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});let i=await e.getParsedProgramAccounts(S.StakeProgram.programId,{filters:r}),n=[];if(t.fetchInflationRewards)try{n=await Ac(e,i.map(({pubkey:s})=>s))}catch(s){let c=s;!c.message.includes("RPC request timed out")&&$.captureError(c,"staking")}return i.map((s,c)=>({pubkey:s.pubkey.toString(),lamports:s.account.lamports,inflationReward:n[c]?.amount,...s.account.data.parsed}))},hc=(e,t)=>B.stakeAccounts(e,t),Pc=(e,t)=>()=>bc(e,{ownerPublicKey:t,fetchInflationRewards:!0});function vc(e,t){let r=hc(t,e.rpcEndpoint),i=Pc(e,t);return _({queryKey:r,queryFn:i,placeholderData:[],staleTime:U({minutes:5})})}o();a();o();a();o();a();o();a();function Lr(e,t){for(let r of t)if(r.epoch===e)return r;return null}var Oo=.09;function wc(e,t,r){if(e.activationEpoch===e.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(t===e.activationEpoch)return{effective:BigInt(0),activating:e.stake};if(t<e.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let i=e.activationEpoch,n=Lr(i,r);if(n!==null){let s=BigInt(0);for(;n!==null;){i++;let c=e.stake-s,u=Number(c)/Number(n.activating),l=Number(n.effective)*Oo,p=BigInt(Math.max(1,Math.round(u*l)));if(s+=p,s>=e.stake){s=e.stake;break}if(i>=t||i>=e.deactivationEpoch)break;n=Lr(i,r)}return{effective:s,activating:e.stake-s}}else return{effective:e.stake,activating:BigInt(0)}}function xo(e,t,r){let{effective:i,activating:n}=wc(e,t,r);if(t<e.deactivationEpoch)return{effective:i,activating:n,deactivating:BigInt(0)};if(t==e.deactivationEpoch)return{effective:i,activating:BigInt(0),deactivating:i};let s=e.deactivationEpoch,c=Lr(s,r);if(c!==null){let u=i;for(;c!==null&&(s++,c.deactivating!==BigInt(0));){let l=Number(u)/Number(c.deactivating),p=Number(c.effective)*Oo,f=BigInt(Math.max(1,Math.round(l*p)));if(u-=f,u<=0){u=BigInt(0);break}if(s>=t)break;c=Lr(s,r)}return{effective:u,deactivating:u,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}o();a();var Eo=function(e){if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");let t=[];return e.value.data.parsed.info.forEach(r=>{t.push({epoch:BigInt(r.epoch),effective:BigInt(r.stakeHistory.effective),activating:BigInt(r.stakeHistory.activating),deactivating:BigInt(r.stakeHistory.deactivating)})}),t},Do=function(e){let t=BigInt(0);if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");return e.value.data.parsed.type==="delegated"&&(t=BigInt(1)),{discriminant:t,meta:{rentExemptReserve:BigInt(e.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:e.value.data.parsed.info.meta.authorized.staker,withdrawer:e.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(e.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(e.value.data.parsed.info.meta.lockup.epoch),custodian:e.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:e.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(e.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(e.value.data.parsed.info.stake.creditsObserved)}}};async function Ze(e,t){let r=new S.PublicKey("SysvarStakeHistory1111111111111111111111111"),i=await e.getParsedAccountInfo(t);if(i===null||i.value===null)throw new Error("Account not found");let n=await e.getParsedAccountInfo(r);if(n===null)throw new Error("StakeHistory not found");let s=Eo(n),c=await e.getEpochInfo(),u=Do(i),{effective:l,activating:p,deactivating:f}=xo(u.stake.delegation,BigInt(c.epoch),s),m;f>0?m="deactivating":p>0?m="activating":l>0?m="active":m="inactive";let y=BigInt(i.value.lamports)-l-u.meta.rentExemptReserve;return{state:m,active:Number(l),inactive:Number(y)}}function Tc(e,t){let r=B.stakeActivationData(t);return _({queryKey:r,queryFn:async()=>{if(!t)throw Mo;return await Ze(e,new S.PublicKey(t))},enabled:!!t,staleTime:1/0})}o();a();o();a();o();a();var tr=w.object({apy:w.number()}),Ic=w.object({validators:w.array(w.string())}),Bo=w.object({epoch:w.number(),effectiveSlot:w.number(),amount:w.number(),postBalance:w.number(),percentChange:w.number(),apr:w.number(),timestamp:w.number()}),_c=w.object({items:w.array(Bo)}),Lc=w.object({address:w.string(),chainId:ri,decimals:w.number(),logoURI:w.string(),name:w.string(),symbol:w.string()}),Mc=w.object({caip19:w.string(),metadata:Lc}),Oc=w.object({vote_account:w.string()}),xc=w.object({apy:w.string(),totalRewardsFeePercentage:w.string().optional(),chainId:ri,convertRatio:w.string(),name:w.string(),stakePoolAddress:w.string(),stakePoolTokenMetadata:Mc,validators:w.array(Oc)}),Fo=w.record(w.string(),w.array(xc)),Tk=w.object({totalStaked:w.string(),rewards:w.string()});var Ro=new Error("Failed to fetch staking APY");async function Co(){try{let e=await ht.api().get("/staking/v1/apy");if(!te(e))throw Ro;let t=e.data;return tr.parse(t).apy}catch{throw Ro}}var Ec=()=>{let e=B.stakeApy();return _({enabled:!0,queryKey:e,gcTime:Xe.Short,staleTime:1/0,async queryFn(){return Co()}})};o();a();var Uo=I(E());o();a();o();a();var No=new Error("Failed to fetch liquid staking supported tokens"),Dc=new Error("Missing supported tokens in response");async function qo(){try{let e=await ht.api().get("/liquid-staking/v1/supported-tokens");if(!te(e))throw No;let t=Fo.safeParse(e.data.supportedTokens);if(!t.success)throw Dc;return t.data}catch{throw No}}var Mr=()=>{let e=B.liquidStakingSupportedTokens();return _({queryKey:e,staleTime:U({minutes:15}),async queryFn(){return await qo()}})};function Bc(e){return typeof e=="string"?e:e?Le(ne(e)):""}var xi=e=>{let t=Bc(e),{data:[r]}=ee(["enable-psol-staking"]),{data:i={}}=Mr(),n=(0,Uo.useMemo)(()=>!!Object.values(i).flat().find(c=>c.stakePoolTokenMetadata.caip19===t),[t,i]);return t===H?r&&n:n};o();a();o();a();var rr=I(E());o();a();o();a();var Ko=new Error("Failed to fetch Average Validator APY");async function Wo(){let e=await ht.api().get("/staking/v1/avg-validator-apy");if(!te(e))throw Ko;let t=tr.safeParse(e.data);if(t.success)return t.data.apy;throw Ko}var Vo=()=>{let e=B.averageValidatorApy();return _({enabled:!0,queryKey:e,gcTime:U({hours:1}),staleTime:1/0,async queryFn(){return Wo()}})};o();a();o();a();var er={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0},amount:"",navigateTo:null},D=Dn(e=>({...er,resetStaking:()=>e(t=>({...t,amount:er.amount,transactionData:er.transactionData,convert:er.convert,navigateTo:er.navigateTo})),setTransactionData:t=>e({transactionData:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setAmount:t=>e({amount:t}),setNavigateTo:t=>e({navigateTo:t})}));var jo=e=>{let t=D(y=>y.provider),r=D(y=>y.setProvider),i=(0,rr.useMemo)(()=>e?Le(ne(e)):"",[e]),{data:n,isPending:s}=Vo(),c=n?n/100:null,{data:u={},isPending:l}=Mr(),p=(0,rr.useMemo)(()=>u[i]??[],[i,u]),f=p?p[0]:void 0,m=(0,rr.useCallback)(y=>{if(!f)return;let g=p.find(k=>k.stakePoolTokenMetadata.caip19===y);if(y){g&&r(g);return}r(f)},[f,r,p]);return{isLoading:l||s,isSupported:p.length>0,providers:p,initLiquidStake:m,defaultProvider:f,avgValidatorApy:c,activeProvider:t}};var It=e=>{let t=bo.get(e);return jo(t)};o();a();var zo=I(E());var Fc=({onLiquidStake:e,onNativeStake:t})=>{let{t:r}=ct(),i=Ai,{avgValidatorApy:n,activeProvider:s}=It(tt.Solana.Mainnet);return{options:(0,zo.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:r("stakeMethodSelectionLiquidStakingTitle"),description:r("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:s?.stakePoolTokenMetadata?.metadata?.symbol}),apy:s?r("stakeMethodEstApy",{apy:fe(parseFloat(s.apy))}):null,disabled:!s,onClick:e??(()=>{})},{type:"native",isRecommended:!1,title:r("stakeMethodSelectionNativeStakingTitle"),description:r("stakeMethodSelectionNativeStakingDescription"),apy:n?r("stakeMethodEstApy",{apy:fe(n)}):null,onClick:t,disabled:!1}],[n,s,e,t,r]),learnMoreLink:i}};o();a();var Qo=I(E());o();a();o();a();var YA={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:"solana:101",validators:[{vote_account:"validator"}]},Go={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:Gn,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:"solana:101",validators:[{vote_account:"validator"}]};function Ct(e){return e?e.stakePoolTokenMetadata.caip19===Go.stakePoolTokenMetadata.caip19:!1}function Ho({hideOnLowBalance:e}){let{activeProvider:t,initLiquidStake:r}=It(tt.Solana.Mainnet);(0,Qo.useEffect)(()=>{r(H)},[r]);let{data:i}=$n();if(!i||!t?.apy)return{shouldHide:!0,apy:0,formattedApy:"0%"};let n=Pt(i.totalQuantityString,i.decimals),s=Ct(t),c=!1;e&&(c=!n.isGreaterThan(0)),s||(c=!0);let u=parseFloat(t.apy),l=`${(u*100).toFixed(2)}%`;return{shouldHide:c,apy:u,formattedApy:l}}o();a();o();a();var Ce=I(E());o();a();var Yo=I(E());var Cc=e=>{let t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t},Jo=async(e,t,r)=>{let i=Cc(t),n=await e.getParsedProgramAccounts(S.StakeProgram.programId,{filters:i}),c=(await Promise.allSettled(n.map(p=>Ze(e,p.pubkey)))).map(p=>{if(p.status==="fulfilled")return p.value.state}),l=(await Promise.allSettled(n.map(p=>{let f=p.account.data?.parsed?.info?.stake?.delegation?.voter,m=r.get(f),y=m?.info?.keybaseUsername,g=m?.info?.iconUrl;return g?new Promise(k=>k(g)):y?_r(y):new Promise(k=>k(null))}))).map(p=>{if(p.status==="fulfilled"&&p.value!==null)return p.value});return n.map((p,f)=>({pubkey:p.pubkey.toString(),lamports:p.account.lamports,activationState:c[f],imageUri:l[f],...p.account.data.parsed}))},$o=(e,t)=>B.convertStakeAccountList(e,t),Nc=(e,t,r)=>()=>Jo(e,{ownerPublicKey:t},r);function Xo(e,t,r,i=!0){let n=$o(t,e.rpcEndpoint),s=Nc(e,t,r);return _({queryKey:n,queryFn:s,enabled:!!t&&i,staleTime:1/0})}var kb=(e,t,r,i)=>{let n=X();return(0,Yo.useCallback)(async()=>{i&&await n.prefetchQuery({queryKey:$o(t,e.rpcEndpoint),queryFn:()=>Jo(e,{ownerPublicKey:t},r)})},[n,t,e,r,i])};o();a();var Ei=(e,t)=>{if(e.type==="initialized")return!1;let r=e?.info?.stake?.delegation?.voter??"",i=Oi(e);return e.activationState==="active"&&t.has(r)&&!i};var qc=e=>{let{data:[t]}=ee(["kill-liquid-staking-convert"]),r=e?.validators,i=(0,Ce.useMemo)(()=>r?new Map(r.map(L=>[L.vote_account,L])):new Map,[r]),{connection:n}=Be(),{data:s}=ie("solana"),{results:c,isFetched:u,isError:l}=Ir(n),p=(0,Ce.useMemo)(()=>new Map(c.map(L=>[L.voteAccountPubkey,L])),[c]),{data:f,isLoading:m,isFetching:y,error:g,refetch:k}=Xo(n,s?.address??"",p,u||l),h=m||y,A=(0,Ce.useMemo)(()=>h||!f?[]:f.map(L=>Uc(L,p,i)).sort((L,x)=>L.lamports>x.lamports?-1:1),[h,f,p,i]),v=(0,Ce.useMemo)(()=>A.filter(L=>L.eligible),[A]),O=(0,Ce.useMemo)(()=>A.filter(L=>!L.eligible),[A]);return e?.stakePoolTokenMetadata.caip19===H?{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:!1,error:null,refetch:()=>{}}:{hasConvertibleStakeAccounts:!t&&v.length>0,eligibleStakeAccounts:v,inelegibleStakeAccounts:O,isLoadingList:h,error:g,refetch:k}},Uc=(e,t,r)=>{let i=Ei(e,r),n=Kc(e,t),s=e.lamports;return{...e,amount:s,eligible:i,title:n,imageUri:e.imageUri}},Kc=(e,t)=>{let r="";if(e.type==="delegated"){let{voter:i}=e.info.stake.delegation,n=t.get(i),s=n?.info?.keybaseUsername;r=n?.info?.name??s??Ln(i)}else e.type==="initialized"&&(r=e.pubkey);return r};o();a();var ra=I(E());o();a();var Or=I(E());o();a();function ta({key:e,queryKey:t,defaultValue:r=null}){let i=Q();return _({enabled:!0,queryKey:t,gcTime:Xe.Long,staleTime:1/0,async queryFn(){try{return await i.get(e)}catch(n){return n instanceof Error&&$.captureError(n,"staking"),r}}})}function ea({key:e,queryKey:t}){let r=Q(),i=X();return vt({async mutationFn(n){try{return await r.set(e,n)}catch(s){s instanceof Error&&$.captureError(s,"staking");return}},async onMutate(n){await i.cancelQueries({queryKey:t});let s=i.getQueryData(t);return i.setQueryData(t,n),{previousValue:s}},onError(n,s,c){i.setQueryData(t,c?.previousValue)}})}var Wc=w.object({convert:w.boolean(),mint:w.boolean()}),Di={convert:!1,mint:!1},Vc=JSON.stringify(Di),xr=()=>{let{data:e}=ta({key:"featureUsed",queryKey:B.featureUsed(),defaultValue:Vc}),t=(0,Or.useMemo)(()=>{if(!e)return Di;let n=Wc.safeParse(JSON.parse(e));return n.success?n.data:Di},[e]),{mutateAsync:r}=ea({key:"featureUsed",queryKey:B.featureUsed()}),i=(0,Or.useCallback)(async n=>{let s={...t,...n};await r(JSON.stringify(s))},[r,t]);return{usageState:t,setUsageState:i}};var Bi=({method:e,goToInfoPage:t,goToInitFlowPage:r})=>{let{usageState:i}=xr();return(0,ra.useCallback)(()=>{i[e]?r():t()},[t,r,e,i])};o();a();o();a();o();a();var yt=I(E());o();a();var jc=2,ia=({networkID:e,poolTokenMintAddress:t})=>{let r=q.getAddressType(e),{fungible:i}=Qt({key:t}),n=Yn(e,r),{fungible:s}=Qt({key:n}),c=R(s?.data.amount??""),u=R(vr),l=R(Je),p=R(Je),f=R(jc).plus(u),m=i?R(f).plus(l):R(p).plus(f).plus(l),y=R(c).minus(m),g=R.max(y,0);return{minAmount:m,maxAmount:g,balance:c}};var zc=e=>{if(e.isLessThan(.01))return e.toString();let t=e.dp();return e.isLessThan(1)&&t&&t>1?e.toFixed(2,R.ROUND_FLOOR):parseFloat(e.toFixed(1,R.ROUND_FLOOR)).toString()},Gc=({goBack:e,goToReviewPage:t,showInfoPage:r,lstCaip19:i})=>{let n=Rt,s=D(C=>C.provider),c=D(C=>C.amount),u=D(C=>C.setAmount),l=n?.data.symbol??"",p=n?.data.chain.id??q.solana.mainnetID,f=n?.data.decimals??Rt.data.decimals,m=s?.stakePoolTokenMetadata.metadata.address??"",{data:y}=ie("solana"),{initLiquidStake:g,activeProvider:k}=It(q.solana.mainnetID);(0,yt.useEffect)(()=>{g(i)},[g,i]),Zn(y,"STAKE_FUNGIBLE");let{minAmount:h,maxAmount:A,balance:v}=ia({networkID:p,poolTokenMintAddress:m}),O=(0,yt.useMemo)(()=>{if(c)return Pn(c,f);let C=v.multipliedBy(.95),Et=R.max(R.min(C,A),h);return zc(Pt(Et,f))},[c,v,f,A,h]),[L,x]=(0,yt.useState)(O),z=Pt(A,f),ft=Pt(h,f),Lt=Pt(v,f),M=hn(L,f).toString(),kt=R(M),St=v.isLessThan(h),Z=kt.isGreaterThan(A),st=kt.isFinite(),Gt=(0,yt.useMemo)(()=>{if(!k)return T.t("mintLiquidStakeAmountNoProviders");if(M&&St)return T.t("mintLiquidStakeAmountMinRequired",{symbol:l,amount:ft});if(M&&Z)return T.t("mintLiquidStakeAmountInsufficientBalance")},[k,M,St,Z,ft,l]),Xt=st&&!Gt,sr=(0,yt.useMemo)(()=>{if(!s)return;let C=fe(Number.parseFloat(s.apy)),{address:Et,name:K,symbol:cr,logoURI:Ss}=s.stakePoolTokenMetadata.metadata,ys=R(1).dividedBy(R(s.convertRatio)),gs=`1 ${l} \u2248 ${ge(ys)} ${cr}`;return{identifier:Et,apy:C,name:K,symbol:cr,rate:gs,logoURI:Ss}},[s,l]),we=(0,yt.useCallback)(()=>{x(String(z))},[z]),pe=(0,yt.useCallback)(C=>{let Et=bn(C);wr(Et,f??9)&&x(Et)},[f]),Te=(0,yt.useCallback)(()=>{u(M),t()},[M,t,u]),me=(0,yt.useCallback)(()=>{u(""),e()},[u,e]);return{amount:L,amountError:Gt,balance:Lt,symbol:l,poolToken:sr,canSubmit:Xt,onBack:me,onContinue:Te,onChangeAmount:pe,onSetMax:we,onInfoPress:r}};o();a();var ae=I(E());var Er=null,Qc=e=>{if(!Er&&e){let t="liquidStake";Er=new gr(e,t)}if(!Er)throw new Error("liquidStakeAnalytics was not properly configured");return Er},Nt=()=>{let e=re(),t=Qc(e),r=m=>{switch(m){case H:return"Phantom Staked SOL";case oe:return"Jito Staked SOL";default:return}},i=m=>{switch(m){case H:return"PSOL";case oe:return"JITOSOL";default:return}},n=(0,ae.useCallback)(({provider:m,entryPoint:y,testVariant:g})=>{e.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:m,lstSymbol:i(m),entryPoint:y,testVariant:g??""}})},[e]),s=(0,ae.useCallback)(({lstCaip19:m,testVariant:y})=>{e.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:m,lstSymbol:i(m),testVariant:y}}})},[e]),c=(0,ae.useCallback)(m=>{let y=m?r(m):void 0,g=m?i(m):void 0;e.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:m,token:y,tokenSymbol:g}}})},[e]),u=(0,ae.useCallback)(({provider:m,payAmount:y,receiveAmount:g,payAmountUSD:k,receiveAmountUSD:h,payAssetTitle:A,providerName:v,receiveAssetTitle:O})=>{e.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,payAmount:y,receiveAmount:g,payAmountUSD:k,receiveAmountUSD:h,payAssetTitle:A,receiveAssetTitle:O,providerName:v}}})},[e]),l=(0,ae.useCallback)(m=>{t.submittedTransaction(m,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),p=(0,ae.useCallback)(({provider:m,amount:y})=>{e.capture("liquidStakingMintSuccess",{data:{stake:{apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,totalAmount:y}}})},[e]),f=(0,ae.useCallback)(m=>{e.capture("liquidStakingMintFailed",{data:{stake:{amount:m}}})},[e]);return{trackMintModalContinue:c,trackMarketingModalSeen:n,trackMarketingModalContinue:s,trackMintSubmitted:l,trackMintSuccess:p,trackMintFailed:f,trackMintApprovedByUser:u}};o();a();var lt=I(E());o();a();var Ne=()=>{let e=D(c=>c.provider),{data:t}=to(),r=t==="GB",i=Me("enable-uk-staking-disclaimers"),n=Ct(e);return i&&r&&n};o();a();var na=I(E());var oa=({txReceipt:e,isTxError:t,poolTokenFungible:r,invalidateQueries:i,dismissLiquidStaking:n})=>{let s=D(u=>u.resetStaking),c=D(u=>u.setNavigateTo);return(0,na.useCallback)(()=>{if(s(),!e||t)return n();i(),c(r?{screen:"FungibleDetail",fungible:r}:{screen:"Activity"}),n()},[e,t,r,i,n,c,s])};o();a();var Dr=I(E());o();a();var aa=({connection:e})=>{let t=Q(),r=On();return vt({mutationFn:async({accountIdentifier:n,ownerAddress:s,pendingActivityRow:c,activityType:u,transactionData:{networkID:l,transaction:p,signers:f}})=>{if(q.isSolanaNetworkID(l)){await pn(p,e);let m={ownerAddress:s,networkID:l,data:{signature:""},type:u,display:{summary:c}};return{id:await Kn({accountIdentifier:n,feePayer:new S.PublicKey(s),connection:e,accountSigner:r,transaction:p,pendingTransactionInput:m,storage:t,opts:{additionalSignerAccounts:f}}),networkID:l}}throw new Error(`Unsupported network for liquid staking: ${l}`)}})};function sa({isLoadingPoolToken:e,pendingActivityRow:t,onTransactionSubmitted:r,onTransactionFailed:i,activityType:n}){let{connection:s}=Be(),c=D(A=>A.transactionData),u=Rt,{data:l,isLoading:p}=xe(),{mutateAsync:f}=aa({connection:s}),y=(0,Dr.useMemo)(()=>(l?.addresses??[]).find(A=>A.networkID===u?.data.chain.id),[u?.data.chain.id,l?.addresses])?.address??"",g=l?.identifier??"";return{executeLiquidStake:(0,Dr.useCallback)(async()=>{try{if(!c)throw new be("MissingTransactionData");let A=await f({accountIdentifier:g,ownerAddress:y,pendingActivityRow:t,activityType:n,transactionData:c});r(A)}catch(A){i(A)}},[g,y,t,c,f,r,i,n]),isReadyToExecute:!p&&!e}}o();a();var ca=I(E());var ua=()=>{let e=X();return(0,ca.useCallback)(()=>$e(e)(),[e])},Yc=(e,t,r)=>Un({connection:e,signature:t,commitment:"finalized"}).then(()=>{$e(r)()});o();a();function Br(e){return e?e.stakePoolTokenMetadata.caip19===oe:!1}o();a();function la(e){return e instanceof be?e:new be("UnknownError")}var Jc="https://www.jito.network/defi/";function $c({poolTokenSymbol:e,txHash:t,txError:r,confirmationStatus:i,showUKDisclaimer:n,onDismiss:s,openExternalLink:c}){let u={title:T.t("commandClose"),onPress:s},l={txHash:t,txHashTitle:T.t("commandViewTransaction")};return r?{type:"error",title:T.t("mintStakeStatusErrorTitle"),message:T.t("mintStakeStatusErrorMessage",{poolTokenSymbol:e}),...l,primaryButton:u,showUKDisclaimer:n,openExternalLink:c}:i==="confirmed"?{type:"success",title:T.t("mintStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...l,primaryButton:u,showUKDisclaimer:n,openExternalLink:c}:{type:"loading",title:T.t("mintStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:T.t("mintStakeStatusLoadingMessage",{poolTokenSymbol:e}),...l,primaryButton:u,showUKDisclaimer:n,openExternalLink:c}}var Xc=(e,t)=>{let r=ua(),[i,n]=(0,lt.useState)("loading"),[s,c]=(0,lt.useState)(),[u,l]=(0,lt.useState)(),{trackMintSubmitted:p,trackMintSuccess:f,trackMintFailed:m}=Nt(),{usageState:y,setUsageState:g}=xr(),k=D(K=>K.provider),h=D(K=>K.setTransactionData),A=D(K=>K.amount),v=Rt,O=k?.stakePoolTokenMetadata.metadata.symbol??"",L=k?.stakePoolTokenMetadata.metadata.address??"",{data:x}=xe(),z=x?.type==="ledger",Lt=(0,lt.useMemo)(()=>(x?.addresses??[]).find(K=>K.networkID===v?.data.chain.id),[v?.data.chain.id,x?.addresses])?.addressType??"solana",{fungible:M,isLoadingTokens:kt}=Qt({key:L}),St=(0,lt.useCallback)(K=>{p(K.id),c(K),y.mint||g({mint:!0})},[g,p,y.mint]),Z=(0,lt.useCallback)(K=>{m(A);let cr=la(K);l(cr)},[m,A]),st=(0,lt.useMemo)(()=>({topLeft:{text:T.t("mintLiquidStakePendingTitle",{symbol:O})}}),[O]),{executeLiquidStake:Gt,isReadyToExecute:Xt}=sa({isLoadingPoolToken:kt,pendingActivityRow:st,onTransactionSubmitted:St,onTransactionFailed:Z,activityType:"delegateStake"}),sr=(0,lt.useCallback)(()=>{f({amount:A,provider:k}),h(void 0),r()},[f,A,k,h,r]),{isSuccess:we,isError:pe,error:Te}=zn(sr,s);(0,lt.useEffect)(()=>{we?n("confirmed"):pe&&(n("error"),l(Te),m(A))},[we,m,A,pe,Te,s]);let me=oa({txReceipt:s,isTxError:pe,poolTokenFungible:M,invalidateQueries:r,dismissLiquidStaking:e}),C=Ne(),Et=(0,lt.useMemo)(()=>$c({poolTokenSymbol:O,txHash:s?.id,txError:u,confirmationStatus:i,showUKDisclaimer:C,onDismiss:me,openExternalLink:t}),[O,s?.id,u,i,me,t,C]);return{addressType:Lt,isLedger:z,isReadyToExecute:Xt,statusPageProps:Et,learnMoreLink:Jc,txError:u,executeLiquidStake:Gt,isJitoSOL:Br(k),isPSOL:Ct(k)}};o();a();var Fi=I(E());function Zc({navigateToMintLiquidStakeAmountPage:e,navigateBack:t}){let{trackMarketingModalContinue:r}=Nt(),{initLiquidStake:i}=It(tt.Solana.Mainnet),{mutate:n}=Mt("StakingWelcome"),s=Tn("psol-popup-copy-test"),c=(0,Fi.useCallback)(()=>{r({lstCaip19:H,testVariant:s}),e(H),n()},[e,r,n,s]),u=(0,Fi.useCallback)(()=>{t(),n()},[t,n]),{t:l}=ct(),p={title:l("liquidStakingInfoPageStillEarningZero"),description:l("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:l("liquidStakingInfoPageConvertYourSOLButton")},f={title:l("liquidStakingInfoPageEarnUpTo9APY"),description:l("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:l("liquidStakingInfoPageStartEarning")};return{onPrimaryButtonPress:c,onClose:u,initLiquidStake:i,viewState:s==="test1"?p:s==="test2"?f:p}}o();a();o();a();var fs=I(E());o();a();var ka=I(E());o();a();var da=(e,t)=>{let r=[],i=e?ne(e):void 0,n=vn(t?.stakePoolTokenMetadata.caip19??"");return i&&n&&(r.push(i),r.push(n)),{query:{data:r}}};o();a();var he=I(E());var tu=(e,t)=>{if(t===void 0)return;let r=ne(e),i=Le(r);return t[i]},eu=(e,t,r)=>{if(!t)return R(0);let i=new R(t.convertRatio),n=Pt(e,t.stakePoolTokenMetadata.metadata.decimals);return r?n.multipliedBy(i):n.div(i)};function pa(e,t,r){return t?{network:{id:t.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},priceData:r?r[t.stakePoolTokenMetadata.caip19]:void 0,decimals:t.stakePoolTokenMetadata.metadata.decimals,logoUri:t.stakePoolTokenMetadata.metadata.logoURI??null,symbol:t.stakePoolTokenMetadata.metadata.symbol,tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}:{network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},priceData:tu(e,r),decimals:e.data.decimals,logoUri:e.data.logoUri??null,symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:e.type??"SolanaNative"}}var ma=(e,t,r,i,n=!1)=>{if(!e)return null;let{priceData:s,decimals:c,...u}=pa(e,n?t:void 0,i),l=Pt(r,c),p=s?.usd?l.multipliedBy(s.usd):null;return{amount:ge(l),amountUsd:p?p.toNumber():null,border:!1,title:T.t("liquidStakeReviewYouPay"),...u}},fa=(e,t,r,i,n=!1)=>{if(!t||!e)return null;let{priceData:s,...c}=pa(e,n?void 0:t,i),u=eu(r,t,n),l=s?.usd?u.multipliedBy(s.usd):null;return{amount:ge(u),amountUsd:l?l.toNumber():null,border:!1,title:n?T.t("liquidStakeUnstakeReviewYouReceive"):T.t("liquidStakeReviewYouReceive"),...c}},Sa=({process:e,fungibleToStake:t,amount:r,provider:i,selectedChainAddress:n,transactionFees:s,isLoading:c,canSubmit:u,transactionData:l,priceMap:p,networkFeeErrorMsg:f,showUKDisclaimer:m})=>{let y=(0,he.useMemo)(()=>ma(t,i,r,p),[t,i,r,p]),g=(0,he.useMemo)(()=>fa(t,i,r,p),[t,i,r,p]),k=i?.name??"",h=n?.address??"",A=i?.apy!==void 0?fe(Number.parseFloat(i.apy)):"",v=`${ge(Pt(s,t?.data.decimals??0))} ${t?.data.symbol}`,O=Br(i),L=Ct(i),x=i?.totalRewardsFeePercentage??"8",z=l?.solWithdrawalFee??l?.stakeWithdrawalFee,ft=(0,he.useMemo)(()=>({accountLabelText:T.t("stakeReviewAccount"),providerLabelText:T.t("liquidStakeReviewProvider"),apyLabelText:T.t("stakeReviewAPY"),apyLabelTextTooltip:T.t("stakeReviewAPYTooltip"),networkFeeLabelText:T.t("liquidStakeReviewNetworkFee"),primaryButtonText:T.t(e==="convert"?"commandConvert":"commandStake"),feeFootnoteText:T.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:x}),feeFootnoteDescriptionText:T.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:z}),feeFootnoteTooltipText:T.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:x})}),[e,x,z]);return{process:e,payAsset:y,receiveAsset:g,account:h,providerName:k,apy:A,networkFee:v,strings:ft,isLoading:c,canSubmit:u,networkFeeErrorMsg:f,isJitoSOL:O,isPSOL:L,showUKDisclaimer:m}},$v=({stakedFungible:e,amount:t,provider:r,selectedChainAddress:i,transactionFees:n,isLoading:s,canSubmit:c,priceMap:u,networkFeeErrorMsg:l,transactionData:p})=>{let f=(0,he.useMemo)(()=>ma(e,r,t,u,!0),[e,r,t,u]),m=(0,he.useMemo)(()=>fa(e,r,t,u,!0),[e,r,t,u]),y=i?.address??"",g=`${ge(Pt(n,e?.data.decimals??0))} ${e?.data.symbol}`,k=p?.isWithdrawSol??!0,h=k?p?.solWithdrawalFee??.1:p?.stakeWithdrawalFee??.1,A=(0,he.useMemo)(()=>({accountLabelText:T.t("stakeReviewAccount"),networkFeeLabelText:T.t("liquidStakeReviewNetworkFee"),primaryButtonText:T.t("commandUnstake"),feeLabelText:T.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:T.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:T.t("unstakeLiquidStakeDelayDisclaimer"),feePercentageText:`${h}%`}),[h]),v=Ne();return{payAsset:f,receiveAsset:m,account:y,networkFee:g,strings:A,isLoading:s,canSubmit:c,networkFeeErrorMsg:l,isWithdrawSol:k,showUKDisclaimer:v}};o();a();var ya=I(E());var ru=U({seconds:10}),ga=({hasPoolTokenAccount:e,chainAddress:t,transactionData:r})=>{let{data:i,isPending:n,isFetched:s,isSuccess:c}=Vn({networkID:r?.networkID??q.solana.mainnetID,multichainTransaction:nu(r),queryOptions:{refetchInterval:ru}}),{data:u=0}=Hn(t),l=J(vr).plus(Je),p=e?J(l):J(u).plus(l),{hasSufficientFunds:f,isLoading:m,nativeTokenSymbol:y}=Xn({networkID:r?.networkID??q.solana.mainnetID,addressType:t?.addressType,gasEstimation:i,transactionValue:p}),g=ou({hasSufficientFunds:f,hasGasEstimationFailed:s&&!c,nativeTokenSymbol:y}),k=iu(i),h=p.plus(k),A=n||m;return(0,ya.useMemo)(()=>({isLoading:A,hasSufficientFunds:f,transactionFees:h,networkFeeErrorMsg:g,nativeTokenSymbol:y}),[A,f,h,g,y])},iu=e=>e?q.isSolanaNetworkID(e.networkID)?new J(e.value):new J(0):new J(0),nu=e=>{if(e&&q.isSolanaNetworkID(e.networkID)){let{networkID:t,transaction:r}=e;return{networkID:t,transaction:[r]}}},ou=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:r})=>t?T.t("transactionGasEstimationError"):e==="insufficient"?T.t("transactionNotEnoughNative",{nativeTokenSymbol:r}):void 0;var Aa=({process:e,transactionData:t,isLoadingTransactionData:r})=>{let i=D(x=>x.provider),n=Rt,s=D(x=>x.amount),{data:c}=ie("solana"),{fungible:u,isLoadingTokens:l}=Qt({key:i?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:p,hasSufficientFunds:f,transactionFees:m,networkFeeErrorMsg:y}=ga({hasPoolTokenAccount:!!u,chainAddress:c,transactionData:t}),g=(0,ka.useMemo)(()=>da(n,i),[n,i]),{data:k}=jn(g),h=r||p||l,A=!h&&!!t&&f!=="insufficient"&&!y,v=Ne();return Sa({process:e,fungibleToStake:n,amount:s,provider:i,selectedChainAddress:c,transactionFees:m,transactionData:t,isLoading:h,canSubmit:A,priceMap:k,networkFeeErrorMsg:y,showUKDisclaimer:e==="mint"&&v})};o();a();o();a();o();a();var es=I(Za());o();a();var ts=I(As()),ql=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],zr=e=>{let t=`${String.fromCharCode(...ql)}||${e}`,r=gn(Buffer.from(t));return ts.default.encode(r)};var Ul=async({connection:e,stakePoolAddress:t,ownerAddress:r,validatorVoteAddress:i,stakeAccountAddress:n,poolTokenAccountAddress:s})=>{let c=new S.PublicKey(t),u=new S.PublicKey(r),l=new S.PublicKey(i),p=new S.PublicKey(n),f=s?new S.PublicKey(s):void 0,m=new S.PublicKey(zr(r)),{instructions:y,signers:g}=await(0,es.depositStake)(e,u,c,u,l,p,f,[{pubkey:m,isSigner:!1,isWritable:!1}]),k=(await e.getLatestBlockhash("confirmed")).blockhash,h=new G.VersionedTransaction(new G.TransactionMessage({instructions:y,payerKey:u,recentBlockhash:k}).compileToV0Message());return{transaction:await De(h,{connection:mr(tt.Solana.Mainnet),calculators:{cost:Sr,budget:new fr(2e5,2e5)}}),signers:g}};o();a();o();a();var ze=I(ur());o();a();var nn=I(ks());var zT=new S.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var mt=new S.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var GT=nn.Buffer.from("ephemeral"),rs=nn.Buffer.from("transient"),ar=S.LAMPORTS_PER_SOL;o();a();var Gr=Object.freeze({DepositStake:{index:9,layout:bt.struct([bt.u8("instruction")])},DepositSol:{index:14,layout:bt.struct([bt.u8("instruction"),bt.ns64("lamports")])},WithdrawStake:{index:10,layout:bt.struct([bt.u8("instruction"),bt.ns64("poolTokens")])},WithdrawSol:{index:16,layout:bt.struct([bt.u8("instruction"),bt.ns64("poolTokens")])}});function Qr(e,t){let r=e.layout.span,i=Buffer.alloc(r),n=Object.assign({instruction:e.index},t);return e.layout.encode(n,i),i}var je=class{static depositStake(t){let{stakePool:r,validatorList:i,depositAuthority:n,withdrawAuthority:s,depositStake:c,validatorStake:u,reserveStake:l,destinationPoolAccount:p,managerFeeAccount:f,referralPoolAccount:m,poolMint:y,referralAccount:g}=t,k=Gr.DepositStake,h=Qr(k),A=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1}];return g&&A.push({pubkey:g,isSigner:!1,isWritable:!1}),new G.TransactionInstruction({programId:mt,keys:A,data:h})}static depositSol(t){let{stakePool:r,withdrawAuthority:i,depositAuthority:n,reserveStake:s,fundingAccount:c,destinationPoolAccount:u,managerFeeAccount:l,referralPoolAccount:p,poolMint:f,lamports:m,referralAccount:y}=t,g=Gr.DepositSol,k=Qr(g,{lamports:m}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}];return n&&h.push({pubkey:n,isSigner:!0,isWritable:!1}),y&&h.push({pubkey:y,isSigner:!1,isWritable:!1}),new G.TransactionInstruction({programId:mt,keys:h,data:k})}static withdrawStake(t){let{stakePool:r,validatorList:i,withdrawAuthority:n,validatorStake:s,destinationStake:c,destinationStakeAuthority:u,sourceTransferAuthority:l,sourcePoolAccount:p,managerFeeAccount:f,poolMint:m,poolTokens:y}=t,g=Gr.WithdrawStake,k=Qr(g,{poolTokens:y}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!0,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new G.TransactionInstruction({programId:mt,keys:h,data:k})}static withdrawSol(t){let{stakePool:r,withdrawAuthority:i,sourceTransferAuthority:n,sourcePoolAccount:s,reserveStake:c,destinationSystemAccount:u,managerFeeAccount:l,solWithdrawAuthority:p,poolMint:f,poolTokens:m}=t,y=Gr.WithdrawSol,g=Qr(y,{poolTokens:m}),k=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}];return p&&k.push({pubkey:p,isSigner:!0,isWritable:!1}),new G.TransactionInstruction({programId:mt,keys:k,data:g})}};o();a();var b=I(Zi());var is=I(ur()),ns=I(ii());var de=[(0,b.u64)("denominator"),(0,b.u64)("numerator")];var Hr=ei().transform(e=>new is.default(e,10)),Yr=ei().transform(e=>new S.PublicKey(e)),Kl=ln(["uninitialized","initialized","delegated","rewardsPool"]),Wl=Zt({rentExemptReserve:Hr,authorized:Zt({staker:Yr,withdrawer:Yr}),lockup:Zt({unixTimestamp:Ge(),epoch:Ge(),custodian:Yr})}),Vl=Zt({meta:Wl,stake:Zt({delegation:Zt({voter:Yr,stake:Hr,activationEpoch:Hr,deactivationEpoch:Hr,warmupCooldownRate:Ge()}),creditsObserved:Ge()}).nullish().default(null)}),os=Zt({type:Kl,info:dn(Vl)}),an=class extends ns.Layout{layout;discriminator;constructor(t,r){super(-1,r),this.layout=t,this.discriminator=(0,b.u8)()}encode(t,r,i=0){return t==null?this.discriminator.encode(0,r,i):(this.discriminator.encode(2,r,i),this.layout.encode(t,r,i+1)+1)}decode(t,r=0){let i=this.discriminator.decode(t,r);if(i===0)return null;if(i===1||i===2)return this.layout.decode(t,r+1);throw new Error("Invalid future epoch "+this.property)}getSpan(t,r=0){let i=this.discriminator.decode(t,r);if(i===0)return 1;if(i===1||i===2)return this.layout.getSpan(t,r+1)+1;throw new Error("Invalid future epoch "+this.property)}};function on(e,t){return new an(e,t)}var as=(0,b.struct)([(0,b.u8)("accountType"),(0,b.publicKey)("manager"),(0,b.publicKey)("staker"),(0,b.publicKey)("stakeDepositAuthority"),(0,b.u8)("stakeWithdrawBumpSeed"),(0,b.publicKey)("validatorList"),(0,b.publicKey)("reserveStake"),(0,b.publicKey)("poolMint"),(0,b.publicKey)("managerFeeAccount"),(0,b.publicKey)("tokenProgramId"),(0,b.u64)("totalLamports"),(0,b.u64)("poolTokenSupply"),(0,b.u64)("lastUpdateEpoch"),(0,b.struct)([(0,b.u64)("unixTimestamp"),(0,b.u64)("epoch"),(0,b.publicKey)("custodian")],"lockup"),(0,b.struct)(de,"epochFee"),on((0,b.struct)(de),"nextEpochFee"),(0,b.option)((0,b.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,b.option)((0,b.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,b.struct)(de,"stakeDepositFee"),(0,b.struct)(de,"stakeWithdrawalFee"),on((0,b.struct)(de),"nextStakeWithdrawalFee"),(0,b.u8)("stakeReferralFee"),(0,b.option)((0,b.publicKey)(),"solDepositAuthority"),(0,b.struct)(de,"solDepositFee"),(0,b.u8)("solReferralFee"),(0,b.option)((0,b.publicKey)(),"solWithdrawAuthority"),(0,b.struct)(de,"solWithdrawalFee"),on((0,b.struct)(de),"nextSolWithdrawalFee"),(0,b.u64)("lastEpochPoolTokenSupply"),(0,b.u64)("lastEpochTotalLamports")]);var jl=(0,b.struct)([(0,b.u64)("activeStakeLamports"),(0,b.u64)("transientStakeLamports"),(0,b.u64)("lastUpdateEpoch"),(0,b.u64)("transientSeedSuffixStart"),(0,b.u64)("transientSeedSuffixEnd"),(0,b.u8)("status"),(0,b.publicKey)("voteAccountAddress")]),Jr=(0,b.struct)([(0,b.u8)("accountType"),(0,b.u32)("maxValidators"),(0,b.vec)(jl,"validators")]);o();a();var xt=I(ur());function sn(e){return isNaN(e)?0:Number(e*S.LAMPORTS_PER_SOL)}function $r(e,t){let r=t.mul(e.totalLamports),i=e.poolTokenSupply;return r.lt(i)?new xt.default(0):r.div(i)}async function Xr(e,t){let[r]=await S.PublicKey.findProgramAddress([t.toBuffer(),Buffer.from("withdraw")],e);return r}async function Zr(e,t,r,i){let[n]=await S.PublicKey.findProgramAddress([t.toBuffer(),r.toBuffer(),i?new xt.default(i).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],e);return n}function Pe(e){if(typeof e=="number")return Math.abs(e)/S.LAMPORTS_PER_SOL;if(typeof e=="bigint")return Math.abs(Number(e))/S.LAMPORTS_PER_SOL;let t=1;e.isNeg()&&(t=-1);let i=e.abs().toString(10).padStart(10,"0"),n=i.length-9,s=i.slice(0,n)+"."+i.slice(n);return t*parseFloat(s)}async function zl(e,t,r,i){let[n]=await S.PublicKey.findProgramAddress([rs,t.toBuffer(),r.toBuffer(),i.toArrayLike(Buffer,"le",8)],e);return n}function Gl(e,t){return e.poolTokenSupply.isZero()||e.totalLamports.isZero()?t:t.mul(e.poolTokenSupply).div(e.totalLamports)}async function ss(e,t,r,i,n,s){let c=await e.getAccountInfo(t.validatorList),u=Jr.decode(c?.data);if(!u?.validators||u?.validators.length==0)throw new Error("No accounts found");let l=await e.getMinimumBalanceForRentExemption(S.StakeProgram.space),p=new xt.default(l+ar),f=[];for(let v of u.validators){if(v.status!==0)continue;let O=await Zr(mt,v.voteAccountAddress,r);if(!v.activeStakeLamports.isZero()){let x=t?.preferredWithdrawValidatorVoteAddress?.equals(v.voteAccountAddress);f.push({type:x?"preferred":"active",voteAddress:v.voteAccountAddress,stakeAddress:O,lamports:v.activeStakeLamports})}let L=v.transientStakeLamports.sub(p);if(L.gt(new xt.default(0))){let x=await zl(mt,v.voteAccountAddress,r,v.transientSeedSuffixStart);f.push({type:"transient",voteAddress:v.voteAccountAddress,stakeAddress:x,lamports:L})}}f=f.sort(n||((v,O)=>O.lamports.sub(v.lamports).toNumber()));let m=await e.getAccountInfo(t.reserveStake),y=new xt.default((m?.lamports??0)-l);y.gt(new xt.default(0))&&f.push({type:"reserve",stakeAddress:t.reserveStake,lamports:y});let g=[],k=new xt.default(i),h=t.stakeWithdrawalFee,A={numerator:h.denominator.sub(h.numerator),denominator:h.denominator};for(let v of["preferred","active","transient","reserve"]){let O=f.filter(L=>L.type==v);for(let{stakeAddress:L,voteAddress:x,lamports:z}of O){if(z.lte(p)&&v=="transient")continue;let ft=Gl(t,z);!s&&!A.numerator.isZero()&&(ft=ft.mul(A.denominator).div(A.numerator));let Lt=xt.default.min(ft,k);if(!Lt.lte(new xt.default(0))&&(g.push({stakeAddress:L,voteAddress:x,poolAmount:Lt}),k=k.sub(Lt),k.isZero()))break}if(k.isZero())break}if(k.gt(new xt.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${Pe(i)} pool tokens.`);return g}function cs(e,t,r){let i=S.Keypair.generate();return t.push(S.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:i.publicKey,lamports:r,space:S.StakeProgram.space,programId:S.StakeProgram.programId})),i}function ti(e){let t,r;return e.solWithdrawalFee&&(t=e.solWithdrawalFee.numerator.toNumber()*100/e.solWithdrawalFee.denominator.toNumber()),e.stakeWithdrawalFee&&(r=e.stakeWithdrawalFee.numerator.toNumber()*100/e.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:t,stakeWithdrawalFee:r}}async function cn(e,t){let r=await e.getAccountInfo(t);if(!r)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:as.decode(r.data),executable:r.executable,lamports:r.lamports,owner:r.owner}}}async function Ql(e,t){let r=(await e.getParsedAccountInfo(t)).value;if(!r||!("parsed"in r.data))throw new Error("Invalid stake account");if(r.data.program!="stake")throw new Error("Not a stake account");return os.parse(r.data.parsed)}async function us(e,t,r,i,n,s,c,u){let l=await e.getBalance(r,"confirmed");if(l<i)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${Pe(l)} SOL.`);let f=(await cn(e,t)).account.data,m=new S.Keypair,y=[m],g=[];if(g.push(S.SystemProgram.transfer({fromPubkey:r,toPubkey:m.publicKey,lamports:i})),!n){let v=yr(f.poolMint,r);g.push(qn(r,v,r,f.poolMint)),n=v}let k=await Xr(mt,t);g.push(je.depositSol({stakePool:t,reserveStake:f.reserveStake,fundingAccount:m.publicKey,destinationPoolAccount:n,managerFeeAccount:f.managerFeeAccount,referralPoolAccount:c??n,poolMint:f.poolMint,lamports:i,withdrawAuthority:k,depositAuthority:u,referralAccount:s}));let{solWithdrawalFee:h,stakeWithdrawalFee:A}=ti(f);return{instructions:g,signers:y,solWithdrawalFee:h,stakeWithdrawalFee:A}}async function ls(e,t,r,i,n=!1,s,c,u,l){let p=await cn(e,t),f=new ze.default(sn(i));u||(u=yr(p.account.data.poolMint,r));let m=await ni(e,u);if(m.amount<f.toNumber())throw new Error(`Not enough token balance to withdraw ${Pe(f)} pool tokens.
          Maximum withdraw amount is ${Pe(m.amount)} pool tokens.`);let y=await e.getMinimumBalanceForRentExemption(S.StakeProgram.space),g=await Xr(mt,t),k=null;c&&(k=await Ql(e,c));let h=[];if(n)h.push({stakeAddress:p.account.data.reserveStake,voteAddress:void 0,poolAmount:f});else if(k&&k?.type=="delegated"){let M=k.info?.stake?.delegation.voter;if(!M)throw new Error(`Invalid stake reciever ${c} delegation`);let kt=await e.getAccountInfo(p.account.data.validatorList),Z=Jr.decode(kt?.data).validators.find(st=>st.voteAccountAddress.equals(M));if(s&&s!==M)throw new Error(`Provided withdrawal vote account ${s} does not match delegation on stake receiver account ${M},
        remove this flag or provide a different stake account delegated to ${s}`);if(Z){let st=await Zr(mt,M,t),Gt=await e.getAccountInfo(st);if(!Gt)throw new Error("Preferred withdraw valdator's stake account is invalid");let Xt=$r(p.account.data,new ze.default(Gt.lamports-ar-y));if(Xt.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${st},
              ${f} asked, ${Xt} available.`);h.push({stakeAddress:st,voteAddress:M,poolAmount:f})}else throw new Error(`Provided stake account is delegated to a vote account ${M} which does not exist in the stake pool`)}else if(s){let M=await Zr(mt,s,t),kt=await e.getAccountInfo(M);if(!kt)throw new Error("Invalid Stake Account");let St=new ze.default(kt.lamports-ar-y);if(St.lt(new ze.default(0)))throw new Error("Invalid Stake Account");let Z=$r(p.account.data,St);if(Z.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${M},
            ${f} asked, ${Z} available.`);h.push({stakeAddress:M,voteAddress:s,poolAmount:f})}else{let M=await ss(e,p.account.data,t,f,l,u.equals(p.account.data.managerFeeAccount));h.push(...M)}let A=[],v=S.Keypair.generate(),O=[v];A.push(gi(u,v.publicKey,r,f.toNumber()));let L=0,x=5,z=0;for(let M of h){if(z>x)break;let St=`Withdrawing \u25CE${$r(p.account.data,M.poolAmount)},
        from stake account ${M.stakeAddress?.toBase58()}`;M.voteAddress&&(St=`${St}, delegated to ${M.voteAddress?.toBase58()}`);let Z;if(!c||k&&k.type==="delegated"){let st=cs(r,A,y);O.push(st),L+=y,Z=st.publicKey}else Z=c;A.push(je.withdrawStake({stakePool:t,validatorList:p.account.data.validatorList,validatorStake:M.stakeAddress,destinationStake:Z,destinationStakeAuthority:r,sourceTransferAuthority:v.publicKey,sourcePoolAccount:u,managerFeeAccount:p.account.data.managerFeeAccount,poolMint:p.account.data.poolMint,poolTokens:M.poolAmount.toNumber(),withdrawAuthority:g})),z++}c&&k&&k.type==="delegated"&&O.forEach(M=>{A.concat(S.StakeProgram.merge({stakePubkey:c,sourceStakePubKey:M.publicKey,authorizedPubkey:r}).instructions)});let{solWithdrawalFee:ft,stakeWithdrawalFee:Lt}=ti(p.account.data);return{instructions:A,signers:O,stakeReceiver:c,totalRentFreeBalances:L,solWithdrawalFee:ft,stakeWithdrawalFee:Lt}}async function ds(e,t,r,i,n,s){let c=await cn(e,t),u=new ze.default(sn(n)),l=yr(c.account.data.poolMint,r),p=await ni(e,l);if(p.amount<u.toNumber())throw new Error(`Not enough token balance to withdraw ${Pe(u)} pool tokens.
            Maximum withdraw amount is ${Pe(p.amount)} pool tokens.`);let f=[],m=S.Keypair.generate(),y=[m];f.push(gi(l,m.publicKey,r,u.toNumber()));let g=await Xr(mt,t);if(s){let v=c.account.data.solWithdrawAuthority;if(!v)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(s.toBase58()!=v.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${v.toBase58()}, received ${s.toBase58()}`)}let k=je.withdrawSol({stakePool:t,withdrawAuthority:g,reserveStake:c.account.data.reserveStake,sourcePoolAccount:l,sourceTransferAuthority:m.publicKey,destinationSystemAccount:i,managerFeeAccount:c.account.data.managerFeeAccount,poolMint:c.account.data.poolMint,poolTokens:u.toNumber(),solWithdrawAuthority:s});f.push(k);let{solWithdrawalFee:h,stakeWithdrawalFee:A}=ti(c.account.data);return{instructions:f,signers:y,solWithdrawalFee:h,stakeWithdrawalFee:A}}var un=async({connection:e,stakePoolAddress:t,ownerAddress:r,amount:i,poolTokenAccountAddress:n})=>{let s=new S.PublicKey(t),c=new S.PublicKey(r),u=n?new S.PublicKey(n):void 0,l=new S.PublicKey(zr(r)),{instructions:p,signers:f,solWithdrawalFee:m,stakeWithdrawalFee:y}=await us(e,s,c,i,u,l),g=(await e.getLatestBlockhash("confirmed")).blockhash,k=new G.VersionedTransaction(new G.TransactionMessage({instructions:p,payerKey:c,recentBlockhash:g}).compileToV0Message());return{transaction:await De(k,{connection:mr(tt.Solana.Mainnet),calculators:{cost:Sr,budget:new fr(2e5,2e5)}}),signers:f,solWithdrawalFee:m,stakeWithdrawalFee:y}};o();a();async function ps({connection:e,stakePoolAddress:t,amount:r,senderAddress:i,useWithdrawSol:n}){let s=new S.PublicKey(i),c,u,l,p;if(n){let g=await ds(e,new S.PublicKey(t),s,s,r).catch(k=>{throw $.captureError(k,"staking"),k});c=g.instructions,u=g.signers,l=g.solWithdrawalFee,p=g.stakeWithdrawalFee}else{let g=await ls(e,new S.PublicKey(t),s,r).catch(k=>{throw $.captureError(k,"staking"),k});c=g.instructions,u=g.signers,l=g.solWithdrawalFee,p=g.stakeWithdrawalFee}let f=(await e.getLatestBlockhash("confirmed")).blockhash,m=new G.VersionedTransaction(new G.TransactionMessage({instructions:c,payerKey:s,recentBlockhash:f}).compileToV0Message());return{transaction:await De(m,{connection:e}),signers:u,solWithdrawalFee:l,stakeWithdrawalFee:p}}async function Hl({connection:e,stakePoolAddress:t,amount:r,senderAddress:i,useWithdrawSol:n}){try{let s=await ps({connection:e,stakePoolAddress:t,amount:r,senderAddress:i,useWithdrawSol:n}),c=await e.simulateTransaction(s.transaction,{sigVerify:!1});if(c.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(c.value.err)}`);return{...s,isWithdrawSol:n}}catch(s){$.captureError(s instanceof Error?s:new Error(String(s)),"staking");try{return{...await ps({connection:e,stakePoolAddress:t,amount:r,senderAddress:i,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(c){throw $.captureError(c instanceof Error?c:new Error(String(c)),"staking"),c}}}var ms=e=>{let t=B.getMintTokenTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,amount:e.amount,poolTokenAccountAddress:e.poolTokenAccountAddress}),r=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.amount;return _({enabled:r,queryKey:t,staleTime:1/0,async queryFn(){if(q.isSolanaNetworkID(e.networkId))try{let{transaction:i,signers:n,solWithdrawalFee:s,stakeWithdrawalFee:c}=await un(e);return{networkID:e.networkId,transaction:i,signers:n,solWithdrawalFee:s,stakeWithdrawalFee:c}}catch(i){throw $.captureError(i,"staking"),i}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};var Yl=e=>{let t=D(g=>g.provider),r=D(g=>g.amount),i=D(g=>g.setTransactionData),{data:n}=ie("solana"),{connection:s}=Be(),{fungible:c}=Qt({key:t?.stakePoolTokenMetadata.metadata.address||""}),u=c?Jn(c):void 0,{trackMintApprovedByUser:l}=Nt(),{data:p,isPending:f}=ms({amount:J(r).toNumber(),connection:s,networkId:t?.chainId??q.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:n?.address??"",poolTokenAccountAddress:u}),m=Aa({process:"mint",transactionData:p,isLoadingTransactionData:f}),y=(0,fs.useCallback)(()=>{l({provider:t,payAmount:m.payAsset?.amount,receiveAmount:m.receiveAsset?.amount,payAmountUSD:m.payAsset?.amountUsd,receiveAmountUSD:m.receiveAsset?.amountUsd,payAssetTitle:m.payAsset?.title,receiveAssetTitle:m.receiveAsset?.title,providerName:m.providerName}),i(p),e()},[l,t,m.payAsset?.amount,m.payAsset?.amountUsd,m.payAsset?.title,m.receiveAsset?.amount,m.receiveAsset?.amountUsd,m.receiveAsset?.title,m.providerName,i,p,e]);return{...m,onPrimaryButtonPress:y}};o();a();var Jl=I(E());o();a();o();a();var ve=I(E());var $l=(e,t)=>{let{navigateToJitoSOLInfoPage:r,navigateToStake:i,navigateToUnstake:n,navigateToExternalLink:s}=e,{trackMintModalContinue:c}=Nt(),u=Me("enable-psol-staking"),l=Me("enable-deposit-psol-with-kamino-link"),m=!t||t===Qn?u?H:oe:t,y=(0,ve.useCallback)(()=>{m===H?i(m):r()},[r,i,m]),g=(0,ve.useCallback)(()=>{c(m),i(m)},[i,c,m]),k=(0,ve.useCallback)(()=>{m===H?n():s(ki)},[n,s,m]),h=(0,ve.useCallback)(()=>{s(bi)},[s]),A=Bi({method:"mint",goToInfoPage:y,goToInitFlowPage:g}),v=xi(m),{initLiquidStake:O}=It(tt.Solana.Mainnet);return(0,ve.useEffect)(()=>{v&&O(m)},[u,O,v,m]),v?{isSupported:!0,onStake:A,onUnstake:k,onDepositWithKamino:l?h:void 0}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}};o();a();o();a();var Xl=["liquidStakingSupportedTokens","featureUsed",Ii],Zl=e=>{let t=String(e.queryKey[1]);return Xl.includes(t)};export{Fe as a,Dt as b,vs as c,ai as d,ws as e,Ts as f,Ms as g,Os as h,Is as i,ci as j,xs as k,ke as l,Es as m,oo as n,Mt as o,Ds as p,Rs as q,Cs as r,Ns as s,yi as t,Ws as u,zs as v,Gs as w,Rt as x,Qs as y,Hs as z,Ys as A,oe as B,vr as C,Je as D,Ic as E,Tk as F,ho as G,B as H,wr as I,ac as J,D as K,Zl as L,Xe as M,Ir as N,Oi as O,Go as P,Ct as Q,ua as R,Yc as S,pc as T,fc as U,Ig as V,yc as W,kc as X,vc as Y,Tc as Z,Ec as _,kb as $,qc as aa,xi as ba,It as ca,xr as da,Bi as ea,Fc as fa,Ho as ga,Gc as ha,Ne as ia,da as ja,$v as ka,ga as la,Aa as ma,Ul as na,Hl as oa,Nt as pa,Yl as qa,oa as ra,sa,la as ta,Xc as ua,Zc as va,$l as wa};
//# sourceMappingURL=chunk-3D6TIEIV.js.map
