import{b as Re,c as fr,d as Je,e as gr}from"./chunk-PER5MVPJ.js";import{a as yr,d as hr,e as Pr,f as wr}from"./chunk-BG2RLIUC.js";import{a as Q,c as ie,d as Y,e as Sr,g as Be}from"./chunk-I5CXLNB7.js";import{a as mr,c as ur}from"./chunk-CHSHJ44H.js";import{C as Ye,D as cr,j as De,m as er,q as sr}from"./chunk-AMFBRYZX.js";import{a as pr}from"./chunk-2ADUYUI4.js";import{a as Z}from"./chunk-5JX67CVA.js";import{b as We,g as lr}from"./chunk-6OGAEY46.js";import{d as rr,f as V,h as or,k as D}from"./chunk-ZS5DCR5N.js";import{a as dr}from"./chunk-YQDK2KIS.js";import{a as Ot}from"./chunk-64KFVBEL.js";import{a as xr,b as Ar}from"./chunk-Q2OHWBCQ.js";import{b as nr,g as ir,h as ar}from"./chunk-UWMKBOBS.js";import{a as Yt}from"./chunk-6EMLS5WZ.js";import{Qb as jt,Sa as Kt,Ua as $t,Wb as Qt,q as It,tb as Gt,ub as qt}from"./chunk-GWUVAKX4.js";import{h as Vt,i as zt,j as _t}from"./chunk-VGFG26AC.js";import{h as Bt,i as Ht,j as Nt}from"./chunk-6QNUOYSW.js";import{t as Fe}from"./chunk-3D6TIEIV.js";import{a as Ee}from"./chunk-TUQYLFS7.js";import{a as tr}from"./chunk-I4O7QVCI.js";import{c as Zt,d as ne}from"./chunk-EW3NOMMT.js";import{F as Rt,I as Le,L as Jt,Q as Xt,eb as E,m as b,u as Qe}from"./chunk-AXFDOJRV.js";import{a as Wt,c as se}from"./chunk-IEY2ZFRQ.js";import{a as Gr}from"./chunk-GYYECUZK.js";import{$ as Lt,P as kt,Q as Ft,T as Ue,U as Ut,_ as Et,g as Ct,ka as Dt}from"./chunk-OGTXJ4NL.js";import{Ec as ut,Kf as bt,Mf as qe,Nf as ke,Od as ve,Rd as gt,Sd as St,Vd as yt,Yf as Tt,Ze as wt,_f as je,ac as pt,ae as Ge,bc as mt,be as Me,de as Ie,ec as K,ee as ht,ef as $,fe as Pt,ff as xt,ge as re,ke as ge,kf as oe,lb as de,ld as ft,md as fe,rf as At}from"./chunk-MP5PPKB7.js";import{H as lt,I as Ce,J as $e,T as dt,y as ct}from"./chunk-LT72WXA6.js";import{A as it,Da as A,F as at,Ha as pe,Ia as U,Ja as H,Na as vt,Q as S,Ra as Mt,Rb as qr,Yb as v,c as k,hb as Se}from"./chunk-NRW4C74H.js";import{f as I,h as c,i as x,m as Buffer,n as l}from"./chunk-YJSZZTEX.js";c();l();var Xe=I(k());var br=({value:e,onChange:t})=>{let{t:r}=S();return Xe.default.createElement(jr,null,Xe.default.createElement(lr,{placeholder:r("assetListSearch"),value:e,onChange:s=>{"value"in s.target&&typeof s.target.value=="string"&&t(s.target.value)},showClearIcon:!!e,onClear:()=>{t("")}}))},jr=b.div`
  padding: 14px 0 14px;
  background: ${A.colors.legacy.bgWallet};
  position: relative;
  border-bottom: none;

  &:after {
    content: "";
    position: absolute;
    bottom: 0;
    left: -20px;
    width: calc(100% + 40px);
    border-bottom: 1px solid ${A.colors.legacy.borderPrimary};
  }
`;c();l();c();l();var Qr=I(k());var Tr=ct({minutes:5}),Ze=(e,t)=>ut({enabled:e!==null&&t,gcTime:Tr,staleTime:Tr,refetchInterval:!1,refetchOnMount:!1,...gr(e)});c();l();var Mr=I(k());c();l();function Yr(e,t){let r="type"in e&&e.type==="fungible"?e:null;if(!r)return!1;let s=r.platform==="all"||r.platform===t.platform,o=r.limitToTokenAddresses&&r.limitToTokenAddresses.length>0;return s&&!o?!0:s&&o?r.limitToTokenAddresses.some(a=>a===t.tokenAddress):!1}function Rr(e,t){let r=!("type"in e)||e.type==="collectible"?e:null;if(!r)return!1;let s=r.platform==="all"||r.platform===t.platform,o=r.limitToCollections&&r.limitToCollections.length>0;return s&&!o?!0:s&&o?r.limitToCollections.some(a=>a===t.collectionId):!1}var Cr=(e,t)=>e?e.filter(r=>t.type==="fungible"?Yr(r,t):Rr(r,t)).slice(0,20):[];c();l();var vr=({input:e,shortcuts:t})=>{if(t.length===0)return[];let r=JSON.stringify(t);return e.collectionId&&(r=r.replaceAll("{{collectionId}}",e.collectionId)),e.tokenId&&(r=r.replaceAll("{{tokenId}}",e.tokenId)),e.ownerAddress&&(r=r.replaceAll("{{ownerAddress}}",e.ownerAddress)),JSON.parse(r)};var Ir=(e,t,r)=>(0,Mr.useMemo)(()=>{let s=vr({input:t,shortcuts:e});return Cr(s,r)},[e,t,r]);function ye(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="fungible")}function Jr(e){return ye(e)?Re(e.externalUrl):Re(e?.externalUrl)}function Xr(e){return ye(e)?!1:e?.collection.isSpam??!0}function Zr(e,t){let r=Jr(e),s=fr(r)&&!!r&&!Xr(e)&&t,{data:o,isPending:a}=Ze(s&&r?new URL(r):null,t),n=ye(e)?"":eo(e)??"",i=ye(e)?e.tokenAddress:e?.id??"",p=at?"mobile":"desktop",g=ye(e)?{platform:p,tokenAddress:i,type:"fungible"}:{platform:p,collectionId:n,type:"collectible"},m=Ir(o??[],{collectionId:n,tokenId:i,ownerAddress:e?.owner},g);return{isLoading:!e||a&&s,shortcuts:s?m:[]}}var eo=e=>{if(e?.chainData){if(zt(e.chainData))return e.chainData.contract;if(Vt(e.chainData))return e.collection.id;if(_t(e.chainData))return e.chainData.firstCreatedInscriptionId}};c();l();c();l();c();l();var He=I(k()),kr=I(Gr());var to=new Wt,Fr=({beforeReset:e}={})=>{let{mutateAsync:t}=Gt(),{mutateAsync:r}=qt(),[s,o]=(0,He.useState)("idle"),a=s==="resetting",n=(0,He.useCallback)(async()=>{await e?.(),o("resetting"),se.capture("resetApp"),await to.clear(),Ar.clear(),await Yt.logOut(),await nr(),await t(!0),await r(!0),kr.default.runtime.reload()},[e,r,t]);return{isResetting:a,handleResetApp:n}};c();l();var f=I(k());c();l();c();l();c();l();c();l();var ee=I(k()),ro=({navigateToPublicAddresses:e,toastController:t})=>{let{t:r}=S(),s=re(),o=qe(),{PRIVACY_STATE_DISPLAY_METADATA:a}=Ne(),{mutateAsync:n}=Ie();return ee.default.createElement(U,{direction:"column",width:"100%",gap:16},ee.default.createElement(v,{rows:["public","private","invisible"].map(i=>{let{icon:p,title:g,description:m}=a[i],y=p,d=i===o;return{type:"radio",id:`privacy-state--${i}`,active:d,alignStartNodeItems:"ascender",start:ee.default.createElement(y,{size:18,color:"accentPrimary"}),topLeft:{text:g},bottomLeft:{component:()=>ee.default.createElement(H,{align:"left",font:"label",color:"textSecondary",children:m})},onPress:()=>{d||n({privacyState:i},{onSuccess:()=>{s.onPrivacyStateUpdated(i),t.success(r("settingsManageUserProfileUpdatePrivacyStateToast"),{id:"privacy-state-toast"})},onError:()=>t.error(r("settingsManageUserProfileUpdatePrivacyStateToastFailure"),{id:"privacy-state-toast"})})}}})}),ee.default.createElement(v,{rows:[{type:"drawer",disabled:o==="invisible",start:ee.default.createElement(pe.Search,{size:18,color:"accentPrimary"}),topLeft:{text:r("settingsClaimUsernameManageAddressesTitle")},topRight:o==="invisible"?{text:r("pastParticipleDisabled")}:void 0,onPress:e}]}))},Ne=()=>{let{t:e}=S(),t=qe(),r=(0,ee.useMemo)(()=>({public:{title:e("settingsManageUserProfilePrivacyStatePublic"),icon:pe.Globe,description:e("settingsManageUserProfilePrivacyStatePublicDescription")},private:{title:e("settingsManageUserProfilePrivacyStatePrivate"),icon:pe.Lock,description:e("settingsManageUserProfilePrivacyStatePrivateDescription")},invisible:{title:e("settingsManageUserProfilePrivacyStateInvisible"),icon:pe.EyeOff,description:e("settingsManageUserProfilePrivacyStateInvisibleDescription")},hidden:{title:e("settingsManageUserProfilePrivacyStatePublic"),icon:pe.Globe,description:e("settingsManageUserProfilePrivacyStatePublicDescription")}}),[e]);return{currentPrivacyState:r[t],PRIVACY_STATE_DISPLAY_METADATA:r}};c();l();var me=I(k()),oo=({navigateToPublicAddressForNetwork:e})=>{let{t}=S(),{data:r}=$(),s=wt(),o=ke(),a=(0,me.useMemo)(()=>s.map(n=>{let i=de.getChainID(n),p=o?.[n],m=r?.find(y=>y.addresses.find(d=>d.networkID===n&&d.address===p)?.address===p)?.name;return m||(m=p?fe(p):t("settingsManageUserPublicAddressEmptyPublicAddress")),{start:me.default.createElement(Ee,{networkID:n,size:24}),topLeft:{text:t(de.getChainName(i))},topRight:{text:m},type:"drawer",onPress:()=>e(n)}}),[r,s,e,o,t]);return me.default.createElement(U,{width:"100%"},me.default.createElement(v,{rows:a}))};c();l();var et=I(qr()),he=I(k()),so=({accountAvatarGenerator:e,toastController:t})=>{let{t:r}=S(),s=re(),{data:o=[]}=$(),{data:a}=Me(),{mutateAsync:n}=ht(),{mutateAsync:i}=Pt(),p=(0,he.useMemo)(()=>o.filter(g=>ft(g)).map(g=>{let m=o.findIndex(d=>(0,et.default)(d.identifier,g.identifier)),y=a?.some(d=>(0,et.default)(d.accountHash,g.identifier))||!1;return{type:"check",active:y,start:e(g.name,g.icon,m),topLeft:{text:g.name,font:"body"},onPress:async()=>{try{let d=a?.length??0;y?(await i(g.identifier),d--):(await n(g.identifier),d++),t.success(r("settingsManageUserProfileUpdateLinkedWalletsToast")),s.onLinkedWalletsUpdated(d,o.length)}catch(d){K.captureError(d,"account"),t.error(r("settingsManageUserProfileUpdateLinkedWalletsToastFailure"))}}}}),[o,a,e,t,r,s,i,n]);return he.default.createElement(U,{width:"100%"},he.default.createElement(v,{rows:p}))};c();l();var R=I(k()),no=({accountAvatarGenerator:e,toastController:t})=>{let{t:r}=S(),s=re(),{data:o=[]}=$(),{data:a=[]}=oe("all"),{data:n}=ve(),i=Object.values(n||{}).filter(h=>h?.isExistingAuthFactor).length,{mutateAsync:p}=gt(),{mutateAsync:g}=St(),m=io(),[y,d]=(0,R.useMemo)(()=>{let h=Object.keys(n||{}),P=new Set,L=new Set;for(let F of o)F.type==="seed"||F.type==="seedless"?F.seedIdentifier&&h.includes(F.seedIdentifier)&&P.add(F.seedIdentifier):F.type==="privateKey"&&F.privateKeyIdentifier&&h.includes(F.privateKeyIdentifier)&&L.add(F.privateKeyIdentifier);return[[...P],[...L]]},[o,n]),C=(0,R.useCallback)(h=>{(async()=>{try{let P=i;n?.[h]?.isExistingAuthFactor?(await g({authenticationPublicKey:n[h]?.authenticationPublicKey}),P--):(await p({secretIdentifier:h}),P++),t.success(r("settingsManageUserProfileUpdateAuthFactorsToast")),s.onAuthFactorsUpdated(P,y.length+d.length)}catch(P){K.captureError(P,"account"),t.error(r("settingsManageUserProfileUpdateAuthFactorsToastFailure"))}})()},[p,n,s,g,r,t,i,d.length,y.length]),O=y.map(h=>{let P=n?.[h]?.isExistingAuthFactor??!1,L=P&&i===1,F=a.findIndex(te=>te.identifier===h);return m({accountAvatarGenerator:e,secretType:"secret-phrase",secretIndex:F,secretId:h,isActive:P,accounts:ge(o,h),onPress:C,disabled:L})}),M=d.map((h,P)=>{let L=n?.[h]?.isExistingAuthFactor??!1,F=L&&i===1;return m({accountAvatarGenerator:e,secretType:"private-key",secretIndex:P,secretId:h,isActive:L,accounts:ge(o,h),onPress:C,disabled:F})}),T=[...O,...M];return R.default.createElement(U,{width:"100%"},R.default.createElement(v,{rows:T}))},io=()=>{let{t:e}=S(),t=(0,R.useCallback)((o,a)=>{switch(o){case"secret-phrase":return e("addAccountSecretPhraseDefaultLabel",{number:a+1});case"private-key":return e("addAccountPrivateKeyDefaultLabel",{number:a+1});default:return""}},[e]),r=(0,R.useCallback)(o=>o===1?e("settingsClaimUsernameNoOfAccountsSingular"):o>0?e("settingsClaimUsernameNoOfAccounts",{noOfAccounts:o}):e("settingsClaimUsernameEmptyAccounts"),[e]);return(0,R.useCallback)(({accountAvatarGenerator:o,secretId:a,secretType:n,secretIndex:i,accounts:p,isActive:g,onPress:m,disabled:y})=>{let d=p[0],C=t(n,i),O=r(p.length),M=d?o(d?.name||"",d?.icon,0):void 0;return{key:`auth-factor-${a}`,type:"check",active:g,topLeft:C,bottomLeft:{text:O,before:M},onPress:()=>m(a),disabled:y}},[r,t])};c();l();var G=I(k());var ao=({navigateToEditUsername:e,navigateToAuthFactors:t,navigateToEditBiography:r,navigateToSyncedAccounts:s,navigateToPrivacyState:o,navigateToFollowers:a})=>{let{t:n}=S(),i=bt(),{data:p,isPending:g}=Ge(),m=p?.biography,{data:y,isPending:d}=ve(),C=Object.values(y||{}),O=C.filter(X=>X?.isExistingAuthFactor)?.length?.toString(),M=d||C?.length===0,{data:T,isPending:h}=Me(),P=h?void 0:T?.length?.toString()||"0",{currentPrivacyState:L}=Ne(),F=L?.icon,{data:te}=Ge(),{isPending:ue}=Kt(te?.id),{formattedFollowers:Ae}=$t(te?.id),ze=(0,G.useMemo)(()=>{let X=[{type:"drawer",topLeft:{text:n("settingsManageUserProfileAboutUsername")},topRight:i&&{text:`@${i}`},onPress:e}];return r&&X.push({type:"drawer",topLeft:{text:n("settingsManageUserProfileAboutBio")},topRight:{text:m},disabled:g,onPress:r}),X},[m,g,r,e,n,i]),_e=(0,G.useMemo)(()=>{let X=[{type:"drawer",topLeft:{text:n("settingsManageUserProfileAuthFactors")},topRight:!M&&{text:O},disabled:M,onPress:t},{type:"drawer",topLeft:{text:n("settingsManageUserProfileLinkedWallets")},topRight:P&&{text:P},disabled:h,onPress:s},{type:"drawer",topLeft:{text:n("settingsManageUserProfilePrivacy")},topRight:!g&&{text:L.title,before:G.default.createElement(F,{size:16,color:"textSecondary"})},disabled:g,onPress:o}];return a&&X.unshift({type:"drawer",topLeft:{text:n("followers")},topRight:{text:Ae},disabled:ue,onPress:a}),X},[F,M,L.title,O,Ae,ue,h,g,t,a,o,s,P,n]);return G.default.createElement(U,{gap:24,width:"100%"},G.default.createElement(U,{gap:"section",width:"100%"},G.default.createElement(H,{font:"title3Semibold",color:"textSecondary",children:n("settingsManageUserProfileAbout")}),G.default.createElement(v,{rows:ze})),G.default.createElement(U,{gap:"section",width:"100%"},G.default.createElement(H,{font:"title3Semibold",color:"textSecondary",children:n("settingsManageUserProfileManage")}),G.default.createElement(v,{rows:_e})))};c();l();var q=I(k()),co=({networkID:e,accountAvatarGenerator:t,toastController:r,promptRemovedAccount:s})=>{let{t:o}=S(),{data:a=[]}=$(M=>M.filter(T=>T.addresses.some(h=>h.networkID===e))),n=ke(),i=re(),{mutateAsync:p,isPending:g}=Ie(),m=de.getChainID(e),y=n?.[e],d=(0,q.useMemo)(()=>y!==void 0&&!a.some(M=>M.addresses.some(T=>T.address===y)),[y,a]),C=(0,q.useCallback)(async M=>{try{let T={...n,[e]:M};await p({addresses:T}),r.success(o("settingsManageUserProfileUpdatePublicAddressToast")),i.onPublicAddressesUpdated(Object.entries(T).filter(([h,P])=>!!P).map(([h])=>h))}catch(T){K.captureError(T,"account")}},[n,e,p,r,o,i]),O=(0,q.useMemo)(()=>{let M=a.map((T,h)=>{let P=T.addresses.find(te=>te.networkID===e)?.address,L=y===P,F=g||!P||T.isReadOnly;return P?{start:t(T.name,T.icon,h),topLeft:{text:T.name,font:"body"},bottomLeft:{text:fe(P||"")},active:L,disabled:F,type:"radio",onPress:async()=>{if(d){s(()=>C(P));return}await C(P)}}:null});return d&&M.push({start:t(void 0,void 0,M.length),topLeft:{text:o("settingsManageUserProfileRemovedAccount"),font:"body"},bottomLeft:{text:fe(y||"")},disabled:!0,active:!0,type:"radio"}),M.filter(Boolean)},[t,a,g,d,e,s,y,C,o]);return q.default.createElement(U,{direction:"column",gap:16,width:"100%"},q.default.createElement(U,{direction:"row",gap:16,alignItems:"center"},q.default.createElement(Ee,{networkID:e,size:24}),q.default.createElement(H,{font:"captionSemibold",color:"textPrimary",children:o(de.getChainName(m))})),q.default.createElement(v,{rows:O}))};c();l();var W=I(k()),rt=W.default.memo(({type:e,onSuccess:t,isMobile:r=!1})=>{let{t:s}=S(),[o,a]=W.default.useState(!1),n=e==="privateKey",i=s(n?"exportSecretPrivateKey":"exportSecretRecoveryPhrase"),p=n?"exportPrivateKey":"exportMnemonic",g=(0,W.useMemo)(()=>[{key:"warning-1",icon:W.default.createElement(Se,{icon:"Key",backgroundColor:"accentAlert",shape:"square"}),title:W.default.createElement(Fe,{i18nKey:n?"exportSecretPrivateKeyInfo1":"exportSecretRecoveryPhraseInfo1",components:[W.default.createElement(H,{key:"export-secret-warning-info-1",font:"bodySemibold",display:"inline"})]})},{key:"warning-2",icon:W.default.createElement(Se,{icon:"EyeOff",backgroundColor:"accentAlert",shape:"square"}),title:W.default.createElement(Fe,{i18nKey:n?"exportSecretPrivateKeyInfo2":"exportSecretRecoveryPhraseInfo2",components:[W.default.createElement(H,{key:"export-secret-warning-info-2",font:"bodySemibold",display:"inline"})]})},{key:"warning-3",icon:W.default.createElement(Se,{icon:"AlertOctagon",backgroundColor:"accentAlert",shape:"square"}),title:s("exportSecretInfo3")}],[s,n]);return W.default.createElement(er,{marginX:r?0:"-16",marginBottom:r?0:"-16",mobileTitleSheetInset:r,image:W.default.createElement(Se,{icon:"ShieldWarning",size:64,backgroundColor:"accentAlert",shape:"circle"}),title:s("exportSecretShowSecretRecoveryPhraseModalTitle",{secretNameText:i}),items:g,primaryButton:{theme:"secondary",children:s("commandContinue"),onAction:t,disabled:!o,testID:"primary-button"},displayEvent:{event:p},footer:{checkbox:{shape:"square",label:{text:W.default.createElement(Fe,{i18nKey:"exportSecretWillNotShare",values:{secretNameText:i.toLowerCase()},components:[W.default.createElement(H,{key:"export-secret-warning-checkbox-label",font:"captionSemibold",display:"inline"})]})},checked:o,onChange:()=>a(m=>!m),id:"export-secret-warning-checkbox",testID:"export-secret-warning-checkbox"}}})});var Pe=I(k());var Ur=({onSuccess:e,type:t})=>{let{t:r}=S(),s=t==="privateKey",o=r(s?"exportSecretShowPrivateKey":"exportSecretShowSecretRecoveryPhrase");return Pe.default.createElement(Pe.default.Fragment,null,Pe.default.createElement(D,{shouldWrap:!0},o),Pe.default.createElement(rt,{onSuccess:e,type:t}))};c();l();var N=I(k());c();l();var ce=I(k());var Er=ce.default.memo(({indexes:e,wordlist:t})=>ce.default.createElement(mo,null,e.length&&t.length?e.map((r,s)=>ce.default.createElement(lo,{key:s},ce.default.createElement(uo,null,`${s+1}.`),ce.default.createElement(fo,{"data-testid":`secret-recovery-phrase-word-input-${s}`,readOnly:!0,autoComplete:"off",autoCorrect:"off",spellCheck:!1,value:t[r],pattern:"[A-Za-z\\s]+"}))):Array.from({length:e?e.length:12},(r,s)=>ce.default.createElement(po,{key:s})))),lo=b(Z).attrs({align:"center",justify:"center"})`
  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.25);
  color: ${A.colors.legacy.textPrimary};
  background: ${A.colors.legacy.bgArea};
  border: 1px solid ${A.colors.legacy.borderSecondary};
  border-radius: 6px;
  align-self: center;
  height: 41px;
`,po=b(pr).attrs({backgroundColor:A.colors.legacy.borderPrimary,borderRadius:"6px",height:"41px"})``,mo=b.div`
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  row-gap: 10px;
  column-gap: 4.5px;
  width: 100%;
`,uo=b(E).attrs({size:14,weight:400,color:A.colors.legacy.textSecondary})`
  padding-left: 8px;
  padding-right: 2px;
`,fo=b.input`
  color: ${A.colors.legacy.textPrimary};
  background: none;
  border: none;
  width: 100%;
  font-size: 14px;
  font-weight: 500;
  padding: 0;
`;c();l();var we=I(k());var Lr=({type:e})=>{let{t}=S(),r=e==="privateKey"?t("exportSecretPrivateKey"):t("exportSecretRecoveryPhrase");return we.default.createElement(go,{"data-testid":`warning-island-${e}`},we.default.createElement(sr,{color:A.colors.legacy.accentAlert,title:we.default.createElement(tr,{i18nKey:"exportSecretWarningPrimaryInterpolated",values:{secretNameText:r}},"Do ",we.default.createElement("u",null,"not")," share your ",r,"!"),description:t("exportSecretWarningSecondaryInterpolated",{secretNameText:r})}))},go=b.div`
  margin-bottom: 20px;
`;var Dr=({accountIdentifier:e,password:t,onDone:r})=>{let{t:s}=S(),{popDetailView:o}=V(),[{indexes:a,wordlist:n},i]=(0,N.useState)({indexes:[],wordlist:[]}),{data:p}=xt(e),g=(0,N.useCallback)(()=>{o(),o(),o()},[o]);return(0,N.useEffect)(()=>{(async()=>{if((p?.type==="seed"||p?.type==="seedless")&&p?.seedIdentifier)try{let m=await t.foldAsync(O=>Qt(Buffer.from(O).toString("utf-8"),p.seedIdentifier));if(!m)throw new Error("Could not get mnemonic");let y=await Ot(),d=m.fold(y.fromEntropy),C=Array.from(await d.getIndexes());i({indexes:C,wordlist:y.wordlist}),K.addBreadcrumb("account",`\u2705 Exported S*ed for Account: ${e}`,"info"),se.capture("exportMnemonic")}catch{throw K.addBreadcrumb("account",`\u{1F6AB} Failed to Export S*ed for Account: "${e}", account: "${JSON.stringify(p)}"`,"error"),new Error("Could not get mnemonic")}else K.addBreadcrumb("account",`\u{1F6AB} Failed to Export S*ed: Account: "${JSON.stringify(p)}"`,"error")})()},[p,e,t]),N.default.createElement(N.default.Fragment,null,N.default.createElement(D,{shouldWrap:!0},s("exportSecretYourSecretRecoveryPhrase")),N.default.createElement(Q,null,N.default.createElement(Y,null,N.default.createElement(Lr,{type:"mnemonic"}),N.default.createElement(Er,{indexes:a,wordlist:n}))),N.default.createElement(Zt,{onClick:r||g},s("pastParticipleDone")))};c();l();var u=I(k());var ot=({navigationCallback:e})=>{let{t}=S(),{data:r=[]}=$(),{data:s=[]}=oe("all"),a=!(s?.length>0),n=je(m=>m.editableAccountMetadata),i=je(m=>m.setEditableAccountMetadata),p=(0,u.useCallback)(m=>{i&&i({...n,seedIdentifier:m})},[n,i]),g=(0,u.useCallback)(m=>{p(m),e(m)},[p,e]);return u.default.createElement(u.default.Fragment,null,u.default.createElement(D,{icon:u.default.createElement(Jt,{fill:A.colors.legacy.textSecondary})},t("settingsSelectSecretPhrase")),u.default.createElement(Q,null,a?u.default.createElement(H,{children:t("addAccountNoSecretPhrases"),font:"labelBold"}):u.default.createElement(U,{gap:8},u.default.createElement(ho,null,s?.map((m,y)=>u.default.createElement(So,{key:`seed-select-${m.identifier}`,accounts:ge(r,m.identifier),seedIdentifier:m.identifier,onClick:g,index:y}))))))},So=({accounts:e,seedIdentifier:t,index:r,onClick:s})=>{let{t:o}=S(),[a,n]=(0,u.useState)(!1),[i,p]=(0,u.useState)(!1),g=(0,u.useCallback)(()=>{n(!a)},[a,n]),m=(0,u.useCallback)(()=>{i||s(t)},[i,s,t]),y=(0,u.useMemo)(()=>e.length>1?o(a?"addAccountHideAccountsForSeed":"addAccountShowAccountsForSeed",{numOfAccounts:e.length}):e.length===1?o(a?"addAccountHideAccountForSeed":"addAccountShowAccountForSeed"):o("addAccountZeroAccountsForSeed"),[e.length,a,o]),d=(0,u.useMemo)(()=>e.length>=1?{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:g}:null,[e.length,g]);return u.default.createElement(Po,{onClick:m},u.default.createElement(Br,null,u.default.createElement(wo,null,u.default.createElement(xo,null,u.default.createElement(Ao,null,o("addAccountSecretPhraseDefaultLabel",{number:r+1})),u.default.createElement(To,{...d},y)),u.default.createElement(Z,{width:"fit-content"},u.default.createElement(Hr,null,u.default.createElement(Qe,{fill:A.colors.legacy.textSecondary,width:10})))),u.default.createElement(yo,{accounts:e,expanded:a})))},yo=({accounts:e,expanded:t})=>{let[r,{height:s}]=rr(),o=(0,u.useMemo)(()=>({initial:{opacity:0,height:0},animate:{opacity:1,height:s},exit:{opacity:0,height:0},transition:{delay:0,duration:.2}}),[s]);return u.default.createElement(vt,{mode:"wait"},t&&e.length>0&&u.default.createElement(Wr,{...o},u.default.createElement(Wr,{ref:r},u.default.createElement(Co,null,e.map((a,n)=>u.default.createElement(Z,{key:`account-${a.identifier}`,justify:"flex-start"},u.default.createElement(yr,{size:24,accountIcon:a.icon,accountName:a.name,accountIndex:n}),u.default.createElement(bo,{style:{marginLeft:6}},a.name)))))))},ho=b.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  gap: 12px;
`,Po=b(Z).attrs({align:"center"})`
  position: relative;
  cursor: pointer;
  background-color: ${A.colors.legacy.bgRow};
  border-radius: 8px;
  &:hover {
    background-color: ${A.colors.legacy.bgButton};
  }
`,wo=b(Z).attrs({justify:"space-between"})`
  padding: 15px;
`,xo=b.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
`,Ao=b(E).attrs({size:16,weight:500,lineHeight:19})``,bo=b(E).attrs({size:15,weight:500,lineHeight:19})``,To=b(E).attrs({size:13,weight:500,lineHeight:19})`
  color: ${A.colors.legacy.accentPrimary};
  margin-top: 2px;
`,Br=b.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`,Co=b(Br)`
  border-top: 1px solid ${A.colors.legacy.bgWallet};
  padding: 15px;
  align-items: flex-start;
  gap: 12px;
`,Wr=b(Mt.div)`
  overflow: hidden;
`,fa=({accounts:e,seedMetas:t,onClick:r,selectedSeedIdentifier:s})=>{let{t:o}=S(),a=(0,u.useMemo)(()=>{if(!t||!s)return 0;let i=t.find(p=>p.identifier===s);return i?t.indexOf(i):0},[t,s]),n=(0,u.useMemo)(()=>!e||!s?[]:e.filter(i=>(i.type==="seed"||i.type==="seedless")&&i.seedIdentifier===s),[e,s]);return u.default.createElement(vo,null,u.default.createElement(Fo,null,o("addAccountSecretPhraseLabel")),u.default.createElement(Mo,{onClick:r,"data-testid":"select-secret-phrase-button"},u.default.createElement(Z,{justify:"space-between"},u.default.createElement(Z,null,u.default.createElement(Io,null,o("addAccountSecretPhraseDefaultLabel",{number:a+1})," ",u.default.createElement(ko,null,"(",n.length>1?o("addAccountNumAccountsForSeed",{numOfAccounts:n.length}):o("addAccountOneAccountsForSeed"),")"))),u.default.createElement(Hr,null,u.default.createElement(Qe,{fill:A.colors.legacy.textSecondary,width:10})))),u.default.createElement(Nr,null,o("addAccountSelectSeedDescription")))},vo=b(mr)`
  width: 100%;
  position: relative;
`,Mo=b(ur)`
  padding: 8px 16px 8px 12px;
`,Hr=b.div`
  svg {
    transform: rotate(270deg) translateX(2px);
  }
`,Io=b(E).attrs({size:16,weight:400,lineHeight:19})``,ko=b(E).attrs({size:16,weight:400,lineHeight:19,as:"span"})`
  display: inline-flex;
  padding: 0 8px;
  color: ${A.colors.legacy.textSecondary};
`,Nr=b(E).attrs({size:14,weight:400,lineHeight:19,textAlign:"left"})`
  margin-top: 8px;
  color: ${A.colors.legacy.textSecondary};
`,Fo=b(Nr)`
  margin-top: 24px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  svg {
    margin-left: 6px;
  }
`;c();l();var J=I(k());var xe=[0,1,5,10,15,30,60,240,480],Or=()=>{let{t:e}=S(),{popDetailView:t}=V(),{data:r}=Ue(),{mutateAsync:s}=Ut(),o=(0,J.useCallback)(async n=>{try{let i=$e(n);await s({lockTimeInMs:i}),se.capture("changeLockTimerDuration",{data:{mins:n}}),t(),r!==i&&De.success(e("changeLockTimerToast"))}catch(i){console.error(i)}},[r,t,s,e]),a=(0,J.useMemo)(()=>{if(r===void 0)return[];let n=lt(r);return Uo(n),xe.map(i=>({topLeft:{text:Ce(e,$e(i))},active:n===i,type:"check",onClick:()=>o(i)}))},[r,o,e]);return J.default.createElement(J.default.Fragment,null,J.default.createElement(D,null,e("changeLockTimerPrimaryText")),J.default.createElement(Q,null,J.default.createElement(v,{rows:a})))},Uo=async e=>{if(!xe.includes(e)){let t=xe.findIndex(r=>r>e);t?xe.splice(t,0,e):xe.push(e)}};c();l();var B=I(k());var Eo={currentPassword:"",password:"",confirmPassword:""},Lo={currentPassword:void 0,password:void 0,confirmPassword:void 0},Vr=()=>{let{t:e}=S(),{popDetailView:t}=V(),[r,s]=(0,B.useState)(Eo),{currentPassword:o,password:a,confirmPassword:n}=r,[i,p]=(0,B.useState)(Lo),g=i.password??i.confirmPassword??i.currentPassword,m=!o||!a||!n,[y,d]=(0,B.useState)(!1),C=M=>{let T=M.currentTarget.name,h=M.currentTarget.value;s({...r,[T]:h})};return B.default.createElement(Be,{onSubmit:async M=>{M.preventDefault(),d(!0);let T,h=hr(a)??wr(o,a),P=Pr(a,n);if(h||P)return p({...i,password:h,confirmPassword:P}),d(!1);try{if(!await ir(o))throw new Error("Incorrect password");await ar(o,n),d(!1),t(),De.success(e("changePasswordToast"))}catch(L){K.captureError(L,"account"),T=L?.message.includes("Incorrect password")?e("changePasswordErrorIncorrectCurrentPassword"):e("changePasswordErrorGeneric"),p({...i,currentPassword:T}),d(!1)}}},B.default.createElement(D,null,e("changePasswordPrimaryText")),B.default.createElement(ie,{size:"large"},B.default.createElement(Y,null,B.default.createElement(Rt,null),B.default.createElement(E,{size:26,weight:500},e("changePasswordPrimaryText")),B.default.createElement(Sr,null,B.default.createElement(We,{type:"password",name:"currentPassword",placeholder:e("changePasswordCurrentPassword"),warning:!!i.currentPassword,onChange:C}),B.default.createElement(We,{type:"password",name:"password",placeholder:e("changePasswordNewPassword"),warning:!!i.password,onChange:C}),B.default.createElement(We.WithWarning,{type:"password",name:"confirmPassword",placeholder:e("changePasswordConfirmNewPassword"),warning:!!i.confirmPassword,warningMessage:g,onChange:C}))),B.default.createElement(ne,{primaryText:e("commandSave"),secondaryText:e("commandCancel"),onSecondaryClicked:t,primaryDisabled:m||y,primaryLoading:y})))};c();l();var z=I(k());var Do=b.div`
  border: 1px solid ${A.colors.legacy.accentWarning};
  border-radius: 6px;
  padding: 8px 16px;
`,zr=z.default.memo(()=>{let{t:e}=S(),{downloadLogs:t,goSupportDesk:r,isFetching:s}=xr();return z.default.createElement(Be,{onSubmit:t},z.default.createElement(D,null,e("settingsDownloadApplicationLogs")),z.default.createElement(ie,{size:"medium"},z.default.createElement("div",null),z.default.createElement(Y,null,z.default.createElement(dr,{diameter:96,color:dt(A.colors.legacy.accentPrimary,.1)},z.default.createElement(Xt,null)),z.default.createElement(E,{size:28,weight:500,lineHeight:34,margin:"20px 0 0",maxWidth:"280px"},e("settingsDownloadApplicationLogs")),z.default.createElement(E,{size:16,color:A.colors.legacy.textSecondary,lineHeight:19,margin:"0 0 4px"},e("settingsDownloadApplicationLogsHelper")),z.default.createElement(Do,null,z.default.createElement(E,{size:14,color:A.colors.legacy.accentWarning,lineHeight:20,weight:500},e("settingsDownloadApplicationLogsWarning")))),z.default.createElement(ne,{primaryDisabled:s,primaryText:e("commandDownload"),secondaryText:e("settingsSupportDesk"),onSecondaryClicked:r})))});c();l();var _=I(k());var _r=({seedIdentifier:e})=>{let{t}=S(),{hideSettingsMenu:r}=or(),{mutate:s}=At(),{data:o=[]}=oe("all"),a=o.findIndex(p=>p.identifier===e)??0,n=(0,_.useCallback)(()=>{s({seedIdentifier:e}),se.capture("walletSeeds",{data:{numOfSeeds:o?.length}}),r()},[r,s,e,o]),{popDetailView:i}=V();return _.default.createElement(_.default.Fragment,null,_.default.createElement(D,null,t("settingsRemoveSecretPhrase")),_.default.createElement(ie,{size:"large"},_.default.createElement("div",null),_.default.createElement(Y,null,_.default.createElement(Le,null),_.default.createElement(E,{size:28,weight:500,lineHeight:34},t("removeSeedPrimaryText",{number:a+1})),_.default.createElement(E,{size:16,color:A.colors.legacy.textSecondary,lineHeight:19,maxWidth:"312px"},t("removeSeedSecondaryText",{number:a+1}))),_.default.createElement(ne,{primaryText:t("commandContinue"),secondaryText:t("commandCancel"),primaryTheme:"primary",onPrimaryClicked:n,onSecondaryClicked:i})))};c();l();var j=I(k());var st=({beforeReset:e})=>{let{t}=S(),{popDetailView:r}=V(),{isResetting:s,handleResetApp:o}=Fr({beforeReset:e});return j.default.createElement(j.default.Fragment,null,j.default.createElement(D,null,t("settingsResetApp")),j.default.createElement(ie,{size:"large"},j.default.createElement("div",null),j.default.createElement(Y,null,j.default.createElement(Le,null),j.default.createElement(E,{size:28,weight:500,lineHeight:34},t("resetSeedPrimaryText")),j.default.createElement(E,{size:16,color:A.colors.legacy.textSecondary,lineHeight:19,maxWidth:"312px"},t("resetSeedSecondaryText"))),j.default.createElement(ne,{primaryDisabled:s,primaryLoading:s,primaryText:t("commandContinue"),secondaryText:t("commandCancel"),primaryTheme:"primary",onPrimaryClicked:o,onSecondaryClicked:r})))};var sl=()=>{let{t:e}=S(),{pushDetailViewCallback:t,pushDetailView:r}=V(),{data:s=[]}=$(),o=s.filter(w=>w.type==="seed"||w.type==="seedless"),a=o.filter(w=>w.type==="seed"),n=o.filter(w=>w.type==="seedless"),i=Tt(),{data:[p]}=pt(["enable-delete-seedless-bundle"]),g=It(),{data:m=[]}=oe("recoverable-only"),{additionalPermissionRows:y}=Wo(),{data:d}=Ue(),{data:C,isPending:O}=kt(),{mutate:M}=Ft(),{data:T,isPending:h}=Et(),{mutate:P}=Lt(),L=(0,f.useCallback)(()=>{M({isAnalyticsOptedOut:!C})},[C,M]),F=(0,f.useCallback)(()=>{P({showWalletShortcuts:!T}),jt.invalidateQueries({queryKey:[Je]})},[T,P]),te=(0,f.useCallback)(w=>{r(f.default.createElement(cr,{password:w,isSettings:!0}))},[r]),ue=t(f.default.createElement(Ye,{type:"seedless",onSuccess:te})),Ae=(0,f.useMemo)(()=>{let w=[{topLeft:{text:e("settingsChangePasswordPrimary")},type:"drawer",onClick:t(f.default.createElement(Vr,null))},{topLeft:{text:e("settingsAutoLockTimerPrimary")},topRight:{text:Ce(e,d)},type:"drawer",onClick:t(f.default.createElement(Or,null))}];return m.length&&w.splice(1,0,{topLeft:{text:e("seedlessResetPinPrimaryText")},type:"drawer",onClick:ue}),w},[m.length,d,t,ue,e]),ze=(0,f.useMemo)(()=>{let w=[];return w.push({topLeft:{text:e("settingsDownloadApplicationLogs")},type:"drawer",onClick:t(f.default.createElement(zr,null))}),w},[t,e]),_e=(0,f.useMemo)(()=>{let w=[];return h||w.push({id:"toggleWalletShortcuts",topLeft:{text:e("settingsWalletShortcutsPrimary")},active:T??Ct,type:"toggle",onClick:F}),w},[T,h,F,e]),X=(0,f.useMemo)(()=>{let w=[];return O||w.push({id:"toggleAnalytics",active:!C,type:"toggle",topLeft:{text:e("settingsSecurityAnalyticsPrimary")},onClick:L}),w},[C,O,L,e]),nt=(0,f.useCallback)((w,ae,Te)=>{r(f.default.createElement(Ur,{type:"mnemonic",onSuccess:()=>r(f.default.createElement(Dr,{accountIdentifier:ae,password:w,onDone:Te}))}))},[r]),be=(0,f.useCallback)((w,ae)=>{let Te=o.find(Ke=>Ke.seedIdentifier===w);Te&&r(f.default.createElement(Ye,{type:"mnemonic",onSuccess:Ke=>nt(Ke,Te.identifier,ae)}))},[r,o,nt]),Kr=(0,f.useMemo)(()=>{let w=[];return(a.length||n.length)&&w.push({topLeft:{text:e("exportSecretShowSecretRecoveryPhrase")},type:"drawer",onClick:t(f.default.createElement(ot,{navigationCallback:ae=>be(ae)}))}),w},[a.length,n.length,e,t,be]),$r=(0,f.useMemo)(()=>{let w=[];return i&&w.push({topLeft:{text:e("settingsRemoveSecretPhrase"),color:"accentAlert"},onClick:t(f.default.createElement(ot,{navigationCallback:ae=>r(f.default.createElement(_r,{seedIdentifier:ae}))}))}),p&&m.length&&w.push({topLeft:{text:e("settingsDeleteSeedlessBundle"),color:"accentAlert"},onClick:()=>be(m[0].identifier,t(f.default.createElement(st,{beforeReset:g})))}),w.push({topLeft:{text:e("settingsResetApp"),color:"accentAlert"},onClick:t(f.default.createElement(st,null))}),w},[g,p,be,r,t,m,i,e]);return f.default.createElement(f.default.Fragment,null,f.default.createElement(D,null,e("settingsSecurityPrimary")),f.default.createElement(Q,null,f.default.createElement(U,{gap:"section"},f.default.createElement(v,{rows:Ae}),f.default.createElement(v,{rows:ze}),y.length>0?f.default.createElement(v,{rows:y}):null,f.default.createElement(v,{rows:_e}),f.default.createElement(U,{gap:"list"},f.default.createElement(v,{rows:X}),f.default.createElement(U,{paddingX:4},f.default.createElement(H,{font:"caption",children:e("settingsSecurityAnalyticsHelper"),color:"textSecondary"}))),f.default.createElement(v,{rows:Kr}),f.default.createElement(v,{rows:$r}))))};function Wo(){let e=yt(),{t}=S(),r=it(x.IS_FIREFOX),s=mt.isFeatureEnabled("always-show-all-sites-permissions"),[o,a]=(0,f.useState)(null),[n,i]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let d=!0;return(async()=>{let C=await Bt();d&&a(C)})(),()=>{d=!1}},[a]);let[p,g]=(0,f.useState)(!1),m=(0,f.useCallback)(async()=>{g(!0);try{let d=!!o;if(d)await Nt(),e.capture("allSitesPermissions",{data:{uiContext:"settings",oldValue:d,newValue:!1}}),a(!1);else{let C=await Ht();e.capture("allSitesPermissions",{data:{uiContext:"settings",oldValue:d,newValue:C}}),a(C)}}catch(d){d instanceof Error&&d.message.includes("You cannot remove required permissions")?i(!0):(console.error("Failed to set permissions"),console.error(d))}finally{g(!1)}},[o,e]),y=(0,f.useMemo)(()=>r||s?o===null?[]:[{id:"toggleAllSitesPermissions",active:o,disabled:n||p,onClick:m,type:"toggle",topLeft:t("settingsAllSitesPermissionsTitle"),helperText:t(n?"settingsAllSitesPermissionsDisabled":"settingsAllSitesPermissionsSubtitle")}]:[],[r,s,o,n,p,m,t]);return(0,f.useMemo)(()=>({additionalPermissionRows:y}),[y])}c();l();var le=I(k());var gl=()=>{let{t:e}=S(),{popDetailView:t}=V(),{currencyRows:r,searchQuery:s,setSearchQuery:o}=Dt({goBack:t});return le.default.createElement(le.default.Fragment,null,le.default.createElement(D,null,e("settingsCurrency")),le.default.createElement(br,{value:s,onChange:o}),le.default.createElement(Q,null,le.default.createElement(v,{rows:r})))};export{ot as a,fa as b,Er as c,Lr as d,ro as e,oo as f,so as g,no as h,ao as i,co as j,Ur as k,Dr as l,br as m,gl as n,Or as o,Vr as p,zr as q,_r as r,Zr as s,Fr as t,sl as u};
//# sourceMappingURL=chunk-GYYWNCQR.js.map
